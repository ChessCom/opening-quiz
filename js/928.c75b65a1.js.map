{"version":3,"file":"js/928.c75b65a1.js","mappings":"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","sources":["webpack://opening-quiz/../../src/chessboard/plugins/custom-items/config/types.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/pieces/find-piece-from-file-rank.ts","webpack://opening-quiz/../../src/chessboard/renderers/model/animator/easing/ease-quartic.ts","webpack://opening-quiz/../../src/chessboard/model/arrows/calculate-arrow-slope.ts","webpack://opening-quiz/../../src/chessboard/config/paths.ts","webpack://opening-quiz/../../src/utils/get-webgl-asset-url.ts","webpack://opening-quiz/../../src/chessboard/model/board/get-file-rank-from-san.ts","webpack://opening-quiz/../../src/chessboard/renderers/model/animator/easing/ease-quadratic.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/utils/set-svg-attributes.ts","webpack://opening-quiz/../../src/chessboard/model/arrows/get-knight-arrow-rotation.ts","webpack://opening-quiz/../../src/chessboard/plugins/theme-takeover/config/types.ts","webpack://opening-quiz/../../src/chessboard/renderers/model/animator/easing/ease-linear.ts","webpack://opening-quiz/../../src/chessboard/plugins/custom-items/renderer/icons/image.ts","webpack://opening-quiz/../../src/chessboard/plugins/custom-items/renderer/icons/star.ts","webpack://opening-quiz/../../src/chessboard/plugins/custom-items/renderer/icons/text-box.ts","webpack://opening-quiz/../../src/chessboard/model/board/get-san-from-file-rank.ts","webpack://opening-quiz/../../src/utils/set-test-data.ts","webpack://opening-quiz/../../src/chessboard/renderers/model/animator/easing/ease-cubic.ts","webpack://opening-quiz/../../src/utils/get-board-xy-from-event.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/types.ts","webpack://opening-quiz/../../src/chessboard/model/arrows/calculate-arrow-rotation.ts","webpack://opening-quiz/../../src/chessboard/model/arrows/get-arrow-color.ts","webpack://opening-quiz/../../src/chessboard/renderers/model/get-undo-move-details.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/main/get-coords-from-square.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/utils/position-to-square.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/utils/position-to-square-percentage.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/main/get-pointer-position.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/main/get-view-aspect-ratio.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/main/get-webgl-canvas.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/main/handle-webgl-context-lost.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/pieces/get-pieces.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/utils/is-position-inside-board.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/listeners/on-mouse-double-click.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/listeners/on-mouse-wheel.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/animation/end-piece-animation.ts","webpack://opening-quiz/../../src/chessboard/model/dom/is-secondary-button.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/listeners/on-pointer-down.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/animation/animate-item.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/animation/animate-piece.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/animation/end-item-animation.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/animation/is-piece-animating.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/pieces/find-piece-from-position.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/hints/find-hint-from-square.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/hints/find-hint-from-file-rank.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/hints/find-hint-from-position.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/listeners/on-pointer-move.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/listeners/on-pointer-up.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/listeners/add-event-listeners.ts","webpack://opening-quiz/../../src/utils/add-to-window.ts","webpack://opening-quiz/../../src/chessboard/renderers/model/animator/update-animated-properties.ts","webpack://opening-quiz/../../src/chessboard/renderers/model/animator/create-animation.ts","webpack://opening-quiz/../../src/chessboard/renderers/model/animator/index.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/main/create-base-state.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/pieces/update-pieces-visuals.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/main/load-assets.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/main/update-loop.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/main/init.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/listeners/remove-event-listeners.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/main/destroy.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/animation/is-animating.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/utils/square-to-piece-position.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/pieces/drag-piece.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/pieces/change-pieces-style.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/pieces/swap-piece.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/animation/end-all-pieces-animation.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/pieces/move-pieces.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/pieces/remove-piece.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/pieces/generate-piece-id.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/pieces/add-piece.ts","webpack://opening-quiz/../../src/chessboard/model/move/is-checkmate.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/pieces/undo-move.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/pieces/drop-piece.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/pieces/illegal-move.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/pieces/load-pieces.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/pieces/make-move.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/board/add-analysis-overlay.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/board/change-board-style.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/board/fade-setup.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/board/flip-board.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/board/set-board-enabled.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/board/remove-analysis-overlay.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/board/resize.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/board/set-board-coordinates.ts","webpack://opening-quiz/../../src/utils/colors/convert-color.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/arrows/add-arrows.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/arrows/remove-arrows.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/highlights/add-highlights.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/highlights/blink-highlights.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/highlights/hide-hover-square.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/highlights/remove-highlights.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/highlights/show-hover-square.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/hints/remove-hints.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/hints/add-hints.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/promotion-window/close-promotion-window.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/promotion-window/open-promotion-window.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/custom-items/add-custom-items.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/custom-items/remove-custom-items.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/effects/add-effects.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/effects/remove-effects.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/effects/fade-out-effect.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/theme-takeover/start-takeover.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/theme-takeover/end-takeover.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/theme-takeover/clear-takeover.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/main/create-instance.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/pieces/find-piece-from-square.ts","webpack://opening-quiz/../../src/utils/limit-number-within-range.ts","webpack://opening-quiz/../../src/chessboard/model/arrows/calculate-arrow-length.ts","webpack://opening-quiz/../../src/chessboard/renderers/webgl/base/constants.ts","webpack://opening-quiz/../../src/chessboard/config/arrows.ts","webpack://opening-quiz/../../src/utils/get-xy-from-event.ts"],"sourcesContent":["import type { Markings } from 'chessboard/plugins/markings/config/types';\n\nexport namespace CustomItems {\n  export interface API {\n    getDefaultStarColor(): string;\n  }\n\n  export namespace Plugin {\n    export const Name = 'custom-items';\n  }\n\n  export enum Classes {\n    Root = 'custom-item',\n  }\n}\n\nexport const CustomItemType = 'customItem';\n\nexport type CustomItemParams = {\n  data: CustomItemData;\n  type: typeof CustomItemType;\n};\n\nexport type CustomItem = Markings.Model & CustomItemParams;\n\nexport type KeyedCustomItem = Markings.KeyedModel & CustomItemParams;\n\nexport type CustomItemData = Markings.WithSquare &\n  Partial<Markings.WithOpacity> &\n  Partial<Markings.WithColor> & {\n    image?: ImageOptions;\n    text?: TextOptions;\n    type: Types;\n    visualOrder?: VisualOrder.Model;\n    frame?: Frame;\n    removalClass?: string;\n    removalSound?: string;\n    removalTimeout?: number;\n  };\n\nexport interface ImageOptions {\n  percentOfSquare?: number;\n  url: string;\n}\n\nexport interface TextOptions {\n  color?: string;\n  value: string;\n}\n\nexport interface Frame {\n  imageURL: string;\n  imageAnimated?: boolean;\n  positionRatioX: number;\n  positionRatioY: number;\n  widthRatio: number;\n  heightRatio: number;\n}\n\nexport namespace VisualOrder {\n  export interface Model {\n    position?: Positions;\n    target: Targets;\n  }\n\n  export const enum Targets {\n    Arrows = 'arrows',\n    Effects = 'effects',\n    Pieces = 'pieces',\n  }\n\n  export const enum Positions {\n    Above = 'above',\n    Below = 'below',\n  }\n}\n\nexport enum Types {\n  Image = 'Image',\n  Star = 'Star',\n  TextBox = 'TextBox',\n}\n","import type { Board } from 'chessboard/model/board/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { findPieceFromSquare } from 'chessboard/renderers/webgl/base/pieces';\nimport { getSanFromFileRank } from 'chessboard/model/board/get-san-from-file-rank';\n\n/**\n * Find a piece based on file/rank coordinates.\n */\nexport function findPieceFromFileRank<T extends WebGLRenderer.State>(\n  state: T,\n  fileRank: Board.FileRank,\n): WebGLRenderer.Piece.Model<any> | null {\n  const square = getSanFromFileRank(fileRank);\n\n  if (square) {\n    return findPieceFromSquare(state, square);\n  }\n\n  return null;\n}\n","/* eslint no-cond-assign: off */\n/* eslint no-param-reassign: off */\n\n/**\n * Easing functions based on Robert Penner's equations.\n * (copied from tween.js: https://github.com/tweenjs/tween.js)\n *\n * http://robertpenner.com/easing\n *\n * t: normalized time\n */\n\n/**\n * Quartic easing in.\n */\nexport function easeInQuartic(t: number): number {\n  return t * t * t * t;\n}\n\n/**\n * Quartic easing out.\n */\nexport function easeOutQuartic(t: number): number {\n  return 1 - --t * t * t * t;\n}\n\n/**\n * Quartic easing in/out.\n */\nexport function easeInOutQuartic(t: number): number {\n  if ((t *= 2) < 1) {\n    return 0.5 * t * t * t * t;\n  }\n\n  return -0.5 * ((t -= 2) * t * t * t - 2);\n}\n","import type { Board } from 'chessboard/model/board/types';\n\n/**\n * Calculate the slope between two points\n */\nexport function calculateArrowSlope({\n  from,\n  to,\n}: {\n  from: Board.Coords;\n  to: Board.Coords;\n}): number {\n  const slope = (from.y - to.y) / (from.x - to.x);\n  const roundedSlope = Number(slope.toFixed(1));\n\n  return roundedSlope;\n}\n","// ! to be removed\nexport const paths = {\n  enPassant: 'https://www.chess.com/article/view/how-to-capture-en-passant',\n  soundsDefault: 'https://www.chess.com/bundles/web/sounds',\n  soundsTheme: 'https://images.chesscomfiles.com/chess-themes/sounds/',\n  webglAssetPaths: '__CHESSCOM_WEBGL_ASSET_PATHS__', // window's property that holds the versioned assets.\n  webglDataUrl: 'https://www.chess.com/bundles/web/images/webgl_data',\n  webglDataUrlDev: 'static/webgl_data',\n};\n","import { paths } from 'chessboard/config/paths';\nimport { getImportMetaEnvDev } from './import-meta-wrappers';\n\n/**\n * Get the full URL for a WebGL asset. Used by the 2D & 3D boards.\n */\nexport function getWebglAssetUrl(assetPath: string): string {\n  const urlParams = new URLSearchParams(window.location.search);\n\n  if (getImportMetaEnvDev()) {\n    return `${paths.webglDataUrlDev}/${assetPath}`;\n  } else if (urlParams.get('useLocalAssets')) {\n    const baseUrl = window.location.href.replace(window.location.search, '');\n\n    return `${baseUrl}/${paths.webglDataUrlDev}/${assetPath}`;\n  }\n\n  if (window[paths.webglAssetPaths] && window[paths.webglAssetPaths][assetPath]) {\n    return window[paths.webglAssetPaths][assetPath];\n  }\n\n  return `${paths.webglDataUrl}/${assetPath}`;\n}\n","import type { Board } from 'chessboard/model/board/types';\n\n/**\n * Get a fileRank from a SanSquare.\n */\nexport function getFileRankFromSan(san: Board.SanSquare): Board.FileRank {\n  return {\n    file: san.toLowerCase().charCodeAt(0) - 96,\n    rank: Number(san.charAt(1)),\n  };\n}\n","/* eslint no-cond-assign: off */\n/* eslint no-param-reassign: off */\n\n/**\n * Easing functions based on Robert Penner's equations.\n * (copied from tween.js: https://github.com/tweenjs/tween.js)\n *\n * http://robertpenner.com/easing\n *\n * t: normalized time\n */\n\n/**\n * Quadratic easing in.\n */\nexport function easeInQuadratic(t: number): number {\n  return t * t;\n}\n\n/**\n * Quadratic easing out.\n */\nexport function easeOutQuadratic(t: number): number {\n  return t * (2 - t);\n}\n\n/**\n * Quadratic easing in/out.\n */\nexport function easeInOutQuadratic(t: number): number {\n  if ((t *= 2) < 1) {\n    return 0.5 * t * t;\n  }\n\n  return -0.5 * (--t * (t - 2) - 1);\n}\n","import type { Game } from 'chessboard/model/game/types';\n\n/**\n * Set attributes for the SVG markup.\n */\nexport function setSVGAttributes(\n  svgMarkup: string,\n  attrs: { color?: string; opacity?: number; text?: Game.Node.Marking.TextOptions },\n): string {\n  const itemEl = document.createElement('div');\n\n  itemEl.innerHTML = svgMarkup;\n\n  const svgEl = itemEl.querySelector('svg');\n\n  if (!svgEl) {\n    return svgMarkup;\n  }\n\n  if (attrs.color) {\n    svgEl.style.fill = attrs.color;\n  }\n\n  if (attrs.opacity) {\n    svgEl.style.opacity = String(attrs.opacity);\n  }\n\n  if (attrs.text) {\n    const textEl = svgEl.querySelector('text');\n\n    if (textEl) {\n      textEl.innerHTML = attrs.text.value;\n\n      textEl.style.fontSize = '0.5rem';\n      textEl.style.fontFamily =\n        '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Helvetica, Arial, sans-serif';\n\n      if (attrs.text.color) {\n        textEl.style.fill = attrs.text.color;\n      }\n    }\n  }\n\n  return svgEl.outerHTML;\n}\n","import type { Board } from 'chessboard/model/board/types';\n\n/**\n * Get degrees to rotate knight arrow\n */\nexport function getKnightArrowRotation({\n  from,\n  slope,\n  to,\n}: {\n  from: Board.Coords;\n  slope: number;\n  to: Board.Coords;\n}): number {\n  switch (slope) {\n    case 2:\n      return from.x > to.x ? 180 : 0;\n    case -2:\n      return from.x > to.x ? 0 : 180;\n    case 0.5:\n      return from.x > to.x ? 90 : 270;\n    case -0.5:\n      return from.x > to.x ? 90 : 270;\n    default:\n      return 0;\n  }\n}\n","import type { ThemeAssets } from 'chessboard/config/theme-assets';\nimport type { Game } from 'chessboard/model/game/types';\nimport {\n  easeInQuadratic,\n  easeOutCubic,\n  easeOutQuadratic,\n} from 'chessboard/renderers/model/animator/easing';\n\nexport namespace ThemeTakeover {\n  export namespace Plugin {\n    export const Name = 'themeTakeover';\n  }\n\n  export enum SwipeDirection {\n    Up = 'up',\n    Down = 'down',\n  }\n\n  export enum SwipePercent {\n    Half = 'half',\n    Full = 'full',\n  }\n\n  export type DirectionOrPercent = SwipeDirection | SwipePercent;\n\n  export type ThemeUrls = {\n    board: string;\n    pieces: ThemeAssets.PieceAssets2D;\n  };\n\n  export type StartParams = {\n    themeUrls: ThemeUrls;\n    swipeDirection: SwipeDirection;\n    swipePercent: SwipePercent;\n    automaticSwipeOut: boolean;\n    showOverlay: boolean;\n\n    coordinateColors?: ThemeAssets.CoordinateColors;\n    swipeDuration?: number;\n  };\n\n  export interface API {\n    start(startParams: StartParams): void;\n    end(): void;\n    clear(): void;\n  }\n\n  export enum Events {\n    StartTakeover = 'StartTakeover',\n    EndTakeover = 'EndTakeover',\n    ClearTakeover = 'ClearTakeover',\n  }\n}\n\nexport type PiecesCollection = ReturnType<Game.Piece.Collection['getCollection']>;\n\nexport const takeoverCssClass = 'takeover';\nexport const boardPiecesWrapperClass = 'board-pieces-wrapper';\nexport const swipeInAnimationName = 'takeoverSwipeIn';\nexport const swipeOutAnimationName = 'takeoverSwipeOut';\n\nexport const SwipeMap = {\n  [ThemeTakeover.SwipePercent.Full]: {\n    percent: 1,\n    duration: 800,\n    easing: {\n      in: easeInQuadratic,\n      out: easeOutQuadratic,\n    },\n  },\n  [ThemeTakeover.SwipePercent.Half]: {\n    percent: 0.5,\n    duration: 400,\n    easing: {\n      in: easeOutCubic,\n      out: easeInQuadratic,\n    },\n  },\n};\n\nexport type StartParams = ThemeTakeover.StartParams;\n","/**\n * Easing functions based on Robert Penner's equations.\n * (copied from tween.js: https://github.com/tweenjs/tween.js)\n *\n * http://robertpenner.com/easing\n *\n * t: normalized time\n */\n\n/**\n * Linear easing.\n */\nexport function easeLinear(t: number): number {\n  return t;\n}\n","/**\n * Image element.\n */\nexport const Image = `\n<svg viewBox=\"0 0 40 40\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n  <image x=\"7.5\" y=\"7.5\" width=\"25\" height=\"25\" />\n</svg>\n`;\n","/**\n * Star SVG\n */\nexport const Star = `\n  <svg xmlns=\"http://www.w3.org/2000/svg\" style=\"fill: #ffa704\" viewBox=\"0 0 40 40\">\n    <path\n      d=\"M23.12,17.84H16.4a1.11,1.11,0,0,1-1.06-1.43L18.7,5.21a1.11,1.11,0,0,1,2.13,0l3.36,11.2A1.11,1.11,0,0,1,23.12,17.84Z\" />\n    <path\n      d=\"M27.21,34.11,4.35,16.88a1.11,1.11,0,0,1,.67-2l17.89,0a1.11,1.11,0,0,1,1.06.8l5,17.19A1.11,1.11,0,0,1,27.21,34.11Z\" />\n    <path\n      d=\"M35.17,16.88,12.31,34.11a1.11,1.11,0,0,1-1.74-1.2l5-17.19a1.11,1.11,0,0,1,1.06-.8l17.89,0A1.11,1.11,0,0,1,35.17,16.88Z\" />\n  </svg>\n`;\n","/**\n * Text box element.\n */\nexport const TextBox = `\n<svg viewBox=\"0 0 40 40\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n  <rect x=\"5\" y=\"12.5\" width=\"30\" height=\"15\" rx=\"3\" fill=\"inherit\" />\n  <text fill=\"#676767\" font-size=\"0.8rem\" x=\"20.5\" y=\"20.5\" dominant-baseline=\"middle\" text-anchor=\"middle\"></text>\n</svg>\n`;\n","import type { Board } from 'chessboard/model/board/types';\n\n/**\n * Get a SanSquare from a FileRank.\n */\nexport function getSanFromFileRank(fileRank: Board.FileRank): Board.SanSquare | null {\n  if (\n    !fileRank ||\n    !fileRank.file ||\n    !fileRank.rank ||\n    fileRank.file > 8 ||\n    fileRank.rank > 8 ||\n    fileRank.file < 1 ||\n    fileRank.rank < 1\n  ) {\n    return null;\n  }\n\n  return <Board.SanSquare>`${String.fromCharCode(96 + fileRank.file)}${fileRank.rank.toString()}`;\n}\n","/**\n * Set test data on any element.\n */\nexport function setTestData(\n  el: HTMLElement | SVGSVGElement | SVGPolygonElement,\n  keyVals: KeyVals,\n): boolean {\n  if (!el) {\n    return false;\n  }\n\n  Object.entries(keyVals).forEach(([key, val]) => {\n    const capitalizedKey = `${key.charAt(0).toUpperCase()}${key.slice(1)}`;\n\n    if (typeof val === 'undefined') {\n      delete el.dataset[`test${capitalizedKey}`];\n    } else {\n      el.dataset[`test${capitalizedKey}`] = <string>val;\n    }\n  });\n\n  return true;\n}\n\ninterface KeyVals {\n  [key: string]: string | number | undefined | boolean;\n}\n\nexport enum TestKeys {\n  Anchor = 'anchor',\n  Animated = 'animated',\n  Blinking = 'blinking',\n  Color = 'color',\n  Dragging = 'dragging',\n  Editable = 'editable',\n  Element = 'element',\n  EnPassant = 'enPassant',\n  File = 'file',\n  Figurine = 'figurine',\n  Flipped = 'flipped',\n  IconTextValue = 'iconTextValue',\n  Inside = 'inside',\n  Interval = 'interval',\n  LeadingFigurine = 'leadingFigurine',\n  Opacity = 'opacity',\n  Outside = 'outside',\n  Position = 'position',\n  Rank = 'rank',\n  Selected = 'selected',\n  ShortString = 'shortstring',\n  Square = 'square',\n  Star = 'star',\n  TextColor = 'textColor',\n  TextValue = 'textValue',\n  Times = 'times',\n  TrailingFigurine = 'trailingFigurine',\n  Type = 'type',\n  WholeMoveNumber = 'wholeMoveNumber',\n  X = 'x',\n  Y = 'y',\n}\n\nexport enum TestElements {\n  Arrow = 'arrow',\n  BlinkingHighlight = 'blinking-highlight',\n  Board = 'board',\n  CommentLink = 'comment-link',\n  Coordinates = 'coordinates',\n  CustomItem = 'custom-item',\n  Effect = 'effect',\n  FadeInOverlay = 'fade-in-overlay',\n  GameResult = 'game-result',\n  HalfMove = 'half-move',\n  Highlight = 'highlight',\n  Hint = 'hint',\n  HoverSquare = 'hover-square',\n  Move = 'move',\n  Piece = 'piece',\n  PotentialCapture = 'capture-hint',\n  PromotionCloseButton = 'promotion-close-button',\n  PromotionPiece = 'promotion-piece',\n  PromotionWindow = 'promotion-window',\n  Square = 'square',\n  SiblingBoard = 'sibling-board',\n}\n","/* eslint no-cond-assign: off */\n/* eslint no-param-reassign: off */\n\n/**\n * Easing functions based on Robert Penner's equations.\n * (copied from tween.js: https://github.com/tweenjs/tween.js)\n *\n * http://robertpenner.com/easing\n *\n * t: normalized time\n */\n\n/**\n * Cubic easing in.\n */\nexport function easeInCubic(t: number): number {\n  return t * t * t;\n}\n\n/**\n * Cubic easing out.\n */\nexport function easeOutCubic(t: number): number {\n  return --t * t * t + 1;\n}\n\n/**\n * Cubic easing in/out.\n */\nexport function easeInOutCubic(t: number): number {\n  if ((t *= 2) < 1) {\n    return 0.5 * t * t * t;\n  }\n\n  return 0.5 * ((t -= 2) * t * t + 2);\n}\n","import { getXYFromEvent } from 'src/utils/get-xy-from-event';\n\n/**\n * Get XY coordinates from event, relative to top left of board.\n */\nexport function getBoardXYFromEvent(event: any, boardEl: HTMLElement): object {\n  const boardRect = boardEl.getBoundingClientRect();\n  const { x, y } = getXYFromEvent(event);\n\n  return {\n    boardRect,\n    x: x - boardRect.left,\n    y: y - boardRect.top,\n  };\n}\n","import type { Animator } from 'chessboard/renderers/model/animator/types';\nimport type { KeyedEffect } from 'chessboard/plugins/effects/config/types';\nimport type { Board } from 'chessboard/model/board/types';\nimport type { Game } from 'chessboard/model/game/types';\nimport type { TestElements } from 'src/utils/set-test-data';\nimport type { LegacyThemes } from 'chessboard/config/legacy-themes';\nimport type { TextOptions, Types, VisualOrder } from 'chessboard/plugins/custom-items/config/types';\nimport type { EventEmitterUtil } from '@chesscom/web-ui';\nimport type { Effects } from 'chessboard/model/effects/types';\nimport type { Core } from 'chessboard/core/config/types';\nimport type {\n  StartParams,\n  ThemeTakeover as Takeover,\n} from 'chessboard/plugins/theme-takeover/config/types';\n\nexport namespace WebGLRenderer {\n  export const PixelRatio = window.devicePixelRatio || 1;\n\n  export interface Params<T extends State> {\n    className: string;\n    options: Board.Options;\n    boardThemes: LegacyThemes.BoardStyles;\n    emitter: EventEmitterUtil.EventEmitter;\n    pieceThemes: LegacyThemes.PieceStyles;\n    containerEl: HTMLElement;\n    methods: Methods<T>;\n    name: string;\n    animationMethods: AnimationMethods<T>;\n    testElement?: TestElements;\n  }\n\n  export interface Instance<T extends State> {\n    state: T;\n    methods: Methods<T>;\n    animationMethods: AnimationMethods<T>;\n    className: string;\n    eventListeners: EventListeners;\n    frameRequestId: number;\n    lastPieceId: number;\n  }\n\n  export interface State {\n    animator: Animator.API;\n    options: Board.Options;\n    boardId: string;\n    destroyed: boolean;\n\n    flipCoordinates: boolean;\n\n    assetsLoaded: boolean;\n    squareSize: number;\n\n    boardStyle: string;\n    boardThemes: LegacyThemes.BoardStyles;\n\n    pieceStyle: string;\n    pieceThemes: LegacyThemes.PieceStyles;\n\n    containerEl: HTMLElement;\n    viewEl: HTMLCanvasElement;\n    viewSize: { width: number; height: number };\n\n    isBoardFlipped: boolean;\n    isBoardEnabled: boolean;\n    isCheckmate: boolean;\n    isPromotionWindowVisible: boolean;\n\n    pieces: Piece.Collection<any>;\n    selectedPiece: Piece.Model<any> | null;\n\n    animatedOverPiece: Piece.Model<any> | null;\n    animatedOverHint: Hint.Model<any> | null;\n\n    fadeSetupAnimation: Animator.Animation.Model | null;\n    pieceAnimations: Piece.Animation.Collection;\n    promotionWindowAnimation: Animator.Animation.Model | null;\n\n    arrows: Arrow.Collection<any>;\n    blinkingHighlights: Highlight.Collection<any>;\n    customItems: CustomItem.Collection<any>;\n    effects: Effect.Collection<any>;\n    highlights: Highlight.Collection<any>;\n    hints: Hint.Collection<any>;\n    hoverSquare: any;\n\n    attackedKing: Piece.Model<any> | null;\n\n    pointer: PointerState;\n\n    takeover: Array<ThemeTakeover.Model<any>>;\n  }\n\n  export interface EventListeners {\n    doubleClick?: (event: Event) => void;\n    pointerDown?: (event: Event) => void;\n    pointerMove?: (event: Event) => void;\n    pointerUp?: (event: Event) => void;\n    wheel?: (event: WheelEvent) => void;\n  }\n\n  export namespace Piece {\n    export type Info = Game.Piece.Model;\n\n    export interface Model<T> {\n      id: number;\n      info: Info;\n      obj: T;\n    }\n\n    export interface Collection<T> {\n      [key: string]: Model<T>;\n    }\n\n    export namespace Animation {\n      export const enum Type {\n        Capture = 'Capture',\n        Drag = 'Drag',\n        Drop = 'Drop',\n        KingAttack = 'KingAttack',\n        Move = 'Move',\n        Restore = 'Restore',\n        Out = 'Out',\n        Over = 'Over',\n      }\n\n      export interface Collection {\n        [key: string]: {\n          animation: Animator.Animation.Model;\n          type: Type;\n        };\n      }\n    }\n  }\n\n  export namespace Arrow {\n    export interface Info {\n      color: string;\n      opacity: number;\n      from: Board.FileRank;\n      to: Board.FileRank;\n      isKnight: boolean;\n    }\n\n    export interface Model<T> {\n      info: Info;\n      obj: T;\n    }\n\n    export interface Collection<T> {\n      [key: string]: Model<T>;\n    }\n  }\n\n  export namespace CustomItem {\n    export interface Info {\n      color?: Game.Node.Marking.Color;\n      image?: Game.Node.Marking.ImageOptions;\n      frame?: Game.Node.Marking.CustomItem.Frame;\n      opacity?: number;\n      position: BoardPosition;\n      square: Board.SanSquare;\n      text?: TextOptions;\n      type: Types;\n      visualOrder?: VisualOrder.Model;\n    }\n\n    export interface Model<T> {\n      info: Info;\n      obj: T;\n    }\n\n    export interface Collection<T> {\n      [key: string]: Model<T>;\n    }\n  }\n\n  export namespace Effect {\n    export interface Info {\n      position: BoardPosition;\n      square: Board.SanSquare;\n      type: Game.Node.Marking.Effect.Types;\n      effect: KeyedEffect;\n    }\n\n    export interface Model<T> {\n      animated: boolean;\n      info: Info;\n      obj: T;\n    }\n\n    export interface Collection<T> {\n      [key: string]: Model<T>;\n    }\n  }\n\n  export namespace Highlight {\n    export interface Info {\n      color: string;\n      opacity: number;\n      position: BoardPosition;\n      square: Board.SanSquare;\n      turn?: Game.ColorsAsNumbers;\n      type?: string;\n    }\n\n    export interface Model<T> {\n      info: Info;\n      obj: T;\n    }\n\n    export interface Collection<T> {\n      [key: string]: Model<T>;\n    }\n  }\n\n  export namespace Hint {\n    export interface Info {\n      color: string;\n      opacity: number;\n      position: BoardPosition;\n      square: Board.SanSquare;\n      turn: Game.ColorsAsNumbers;\n      type: Type;\n    }\n\n    export interface Model<T> {\n      info: Info;\n      obj: T;\n      activeAnimation?: ItemAnimation.Model;\n    }\n\n    export interface Collection<T> {\n      [key: string]: Model<T>;\n    }\n\n    export const enum Type {\n      Move = 'move',\n      Capture = 'capture',\n    }\n  }\n\n  export namespace ThemeTakeover {\n    export interface Model<T> {\n      info: StartParams;\n      obj: T;\n    }\n  }\n\n  export interface Size {\n    width: number;\n    height: number;\n  }\n\n  export interface BoardPosition {\n    x: number;\n    y: number;\n  }\n\n  export interface PointerState {\n    event: Event;\n    insideBoard: boolean;\n\n    down: boolean;\n    downInsideBoard: boolean;\n    rightDown: boolean;\n    secondaryDown: boolean;\n\n    viewPosition: Board.Coords;\n    boardPosition: BoardPosition;\n\n    previousViewPosition: Board.Coords;\n    previousBoardPosition: BoardPosition;\n  }\n\n  export namespace ItemAnimation {\n    export interface Model {\n      animation: Animator.Animation.Model;\n      type: Type;\n    }\n\n    export const enum Type {\n      Show = 'show',\n      Hide = 'hide',\n      Out = 'out',\n      Over = 'over',\n    }\n  }\n\n  export interface Methods<T extends State> {\n    createState: (baseState: State) => T;\n    flipBoard: (state: T, shouldFlip: boolean) => void;\n    setBoardEnabled?: (state: T, enabled: boolean) => void;\n    init: (state: T) => void;\n    destroy: (state: T) => void;\n    loadAssets: (state: T) => Promise<void>;\n    render: (state: T, time: number) => void;\n    onWebGLContextLost: (state: T) => void;\n\n    addAnalysisOverlay: (state: T) => void;\n    removeAnalysisOverlay: (state: T) => void;\n\n    normalizePointer: (state: T, coords: Board.Coords) => Board.Coords;\n    getBoardPosition: (state: T, coords: Board.Coords) => BoardPosition;\n    getPieceStyles?: () => LegacyThemes.PieceStyles;\n    getViewPosition: (state: T, position: BoardPosition) => Board.Coords;\n    getViewAspectRatio: () => number;\n    fileRankToPosition: (state: T, fileRank: Board.FileRank) => BoardPosition;\n    positionToFileRank: (state: T, position: BoardPosition) => Board.FileRank;\n    positionToNearestSquare: (state: T, position: BoardPosition) => BoardPosition;\n\n    createPieceObj: (state: T, pieceInfo: Piece.Info) => any;\n    addPiece: (state: T, piece: Piece.Model<any>) => void;\n    removePiece: (state: T, piece: Piece.Model<any>) => void;\n    setPiecePosition: (piece: Piece.Model<any>, position: BoardPosition) => void;\n    fadeInAllPieces: (state: T, duration: number) => Animator.Animation.Model;\n\n    updatePiecesStyle: (state: T, fallback: boolean) => Promise<void>;\n    updatePieceVisuals: (state: T, piece: Piece.Model<any>) => void;\n    updateViewSize: (state: T, size: Size) => void;\n\n    updateBoardStyle: (state: T) => Promise<void>;\n\n    updateBoardCoordinates: (\n      state: T,\n      coordinates: {\n        flipped: boolean;\n        position: Board.CoordinatesPositions;\n        colorUpdate?: boolean;\n      },\n    ) => void;\n\n    createArrowObj: (state: T, arrowInfo: Arrow.Info) => any;\n    addArrow: (state: T, arrow: Arrow.Model<any>) => void;\n    removeArrow: (state: T, arrow: Arrow.Model<any>) => void;\n\n    createCustomItemObj: (state: T, itemInfo: CustomItem.Info) => any;\n    addCustomItem: (state: T, item: CustomItem.Model<any>) => void;\n    removeCustomItem: (state: T, item: CustomItem.Model<any>) => void;\n\n    createEffectObj: (state: T, effectInfo: Effect.Info) => any;\n    createEffectObjAnimated: (\n      state: T,\n      effectInfo: Effect.Info,\n      translations: Effects.Translations,\n      context: Core.Context,\n    ) => any;\n    addEffect: (state: T, effect: Effect.Model<any>) => void;\n    removeEffect: (state: T, effect: Effect.Model<any>) => void;\n    fadeOutEffect: (state: T, square: Board.SanSquare) => Promise<void>;\n\n    createHighlightObj: (state: T, highlightInfo: Highlight.Info) => any;\n    addHighlight: (state: T, highlight: Highlight.Model<any>) => void;\n    removeHighlight: (state: T, highlight: Highlight.Model<any>) => void;\n\n    createCaptureHintObj: (state: T, hintInfo: Hint.Info) => any;\n    createMoveHintObj: (state: T, hintInfo: Hint.Info) => any;\n    addHint: (state: T, hint: Hint.Model<any>) => void;\n    removeHint: (state: T, hint: Hint.Model<any>) => void;\n\n    createHoverSquareObj: (state: T) => any;\n    showHoverSquare: (state: T, position: BoardPosition) => void;\n    hideHoverSquare: (state: T) => void;\n\n    openPromotionWindow: (\n      state: T,\n      promotionMove: Game.Move.Model,\n    ) => Promise<Game.Piece.Types | undefined>;\n    closePromotionWindow: (state: T) => void;\n\n    onPieceDrag?: (state: T, piece: Piece.Model<any>) => void;\n    onPieceDrop?: (state: T, piece: Piece.Model<any>) => void;\n    onPieceMoved?: (state: T, params: { piece: Piece.Model<any>; square: Board.SanSquare }) => void;\n    onPiecesLoaded?: (state: T) => void;\n    onPiecesVisualsChanged?: (state: T) => void;\n\n    onMouseDoubleClick?: (state: T) => void;\n    onMouseWheel?: (state: T, wheelDelta: number) => boolean;\n    onPointerDown?: (state: T) => void;\n    onPointerMove?: (state: T) => void;\n    onPointerUp?: (state: T) => void;\n\n    createTakeover: (state: T, takeoverInfo: StartParams) => any;\n    addTakeover: (state: T, takeover: any) => void;\n    endTakeover: (state: T) => void;\n    removeTakeover: (state: T) => void;\n    removeTakeoverByType: (state: T, takeoverType: Takeover.DirectionOrPercent) => void;\n  }\n\n  export interface AnimationMethods<T extends State> {\n    init?: (state: T) => void;\n    loadAssets?: (state: T) => Promise<void>;\n\n    createHighlightObj?: (state: T, highlightInfo: Highlight.Info) => any;\n\n    createCaptureHintObj?: (state: T, hintInfo: Hint.Info) => any;\n    createMoveHintObj?: (state: T, hintInfo: Hint.Info) => any;\n\n    createHoverSquareObj?: (state: T) => any;\n    showHoverSquare?: (state: T, position: BoardPosition) => void;\n    hideHoverSquare?: (state: T) => void;\n\n    movePiece: (\n      state: T,\n      params: {\n        piece: Piece.Model<any>;\n        from: BoardPosition;\n        to: BoardPosition;\n        castling: boolean;\n        capturing: boolean;\n      },\n    ) => Animator.Animation.Model;\n\n    blinkHighlight: (\n      state: T,\n      params: { highlight: Highlight.Model<any>; interval: number; times: number },\n    ) => Animator.Animation.Model;\n\n    attackKing?: (\n      state: T,\n      params: { piece: Piece.Model<any>; illegalMove?: boolean },\n    ) => Animator.Animation.Model;\n\n    dragPiece?: (state: T, piece: Piece.Model<any>) => Animator.Animation.Model;\n\n    dropPiece?: (\n      state: T,\n      params: { piece: Piece.Model<any>; to: BoardPosition; capturing?: boolean },\n    ) => Animator.Animation.Model;\n\n    capturePiece?: (\n      state: T,\n      params: { piece: Piece.Model<any>; fromDrop?: boolean },\n    ) => Animator.Animation.Model;\n\n    restorePiece?: (state: T, piece: Piece.Model<any>) => Animator.Animation.Model;\n\n    pieceOver?: (\n      state: T,\n      params: { piece: Piece.Model<any>; pointer: PointerState },\n    ) => Animator.Animation.Model;\n\n    pieceOut?: (state: T, piece: Piece.Model<any>) => Animator.Animation.Model;\n\n    hideCustomItem?: (state: T, item: CustomItem.Model<any>) => Animator.Animation.Model;\n\n    showHighlight?: (state: T, highlight: Highlight.Model<any>) => Animator.Animation.Model;\n\n    hideHighlight?: (state: T, highlight: Highlight.Model<any>) => Animator.Animation.Model;\n\n    showHint?: (state: T, hint: Hint.Model<any>) => Animator.Animation.Model;\n    hideHint?: (state: T, hint: Hint.Model<any>) => Animator.Animation.Model;\n    hintOver?: (state: T, hint: Hint.Model<any>) => Animator.Animation.Model;\n    hintOut?: (state: T, hint: Hint.Model<any>) => Animator.Animation.Model;\n\n    showPromotionWindow?: (state: T) => Animator.Animation.Model;\n    hidePromotionWindow?: (state: T) => Animator.Animation.Model;\n  }\n}\n","import type { Board } from 'chessboard/model/board/types';\nimport { calculateArrowLength } from 'chessboard/model/arrows/calculate-arrow-length';\n\n/**\n * Get the angle to rotate the arrow\n */\nexport function calculateArrowRotation({\n  from,\n  to,\n}: {\n  from: Board.Coords;\n  to: Board.Coords;\n}): number {\n  const length = calculateArrowLength({ from, to });\n\n  // arrows point straight down before they get rotated. So we need to calculate\n  // the coordinates of the original `to` point from before the arrow is rotated.\n  const originalTo = {\n    x: from.x,\n    y: from.y + length,\n  };\n\n  // arrow before rotation\n  const vector1 = {\n    x: from.x - originalTo.x,\n    y: from.y - originalTo.y,\n  };\n\n  // arrow after rotation\n  const vector2 = {\n    x: from.x - to.x,\n    y: from.y - to.y,\n  };\n\n  // calculate the angle between the two vectors\n  const cosine = (vector1.x * vector2.x + vector1.y * vector2.y) / length ** 2;\n  const clampedCosine = Math.max(-1, Math.min(1, cosine));\n  const radians = Math.acos(clampedCosine);\n\n  // convert to degrees and round to 100th\n  const degrees = Math.floor(radians * (180 / Math.PI) * 100) / 100;\n\n  return from.x < to.x ? 360 - degrees : degrees;\n}\n","import type { Board } from 'chessboard/model/board/types';\nimport { Game } from 'chessboard/model/game/types';\n\n/**\n * Get the color for an arrow. First choice is one of the color options, like alt\n * or shift. Next is custom color. Last is the default color option.\n */\nexport function getArrowColor(\n  color: Game.Node.Marking.Arrow.Model['color'],\n  colorOptions: Board.ArrowColors,\n): string {\n  return (\n    (color && colorOptions[Game.Node.Marking.JCEColorsMap[color]]) ?? color ?? colorOptions.default\n  );\n}\n","import type { Board } from 'chessboard/model/board/types';\nimport type { Game } from 'chessboard/model/game/types';\nimport { getOppositeColor } from 'chessboard/model/game/get-opposite-color';\nimport { nodeTargetSquare } from 'api/move/model/node-target-square';\n\n/**\n * Get the details required for undoing a move.\n */\nexport function getUndoMoveDetails(move: Game.Move.ExtendedNode): {\n  movedPieces: Game.Move.Undo[];\n  promotedSquare?: Board.SanSquare;\n  restoredPiece?: Game.Piece.Model;\n} {\n  const movedPieces: Game.Move.Undo[] = [\n    {\n      animate: move.animate,\n      from: nodeTargetSquare(move),\n      to: <Board.SanSquare>move.from,\n    },\n  ];\n\n  if (move.rookMove) {\n    movedPieces.push({\n      ...move.rookMove,\n      from: move.rookMove.to,\n      to: move.rookMove.from,\n    });\n  }\n\n  const restoredPiece =\n    move.captured && move.capturedStr\n      ? {\n          color: getOppositeColor(move.color),\n          promoted: move.capturedPromotedPawn,\n          square: move.EPCapturedSquare || move.to,\n          type: <Game.Piece.ShortStrings.Black>move.capturedStr.toLowerCase(),\n        }\n      : undefined;\n\n  return {\n    movedPieces,\n    promotedSquare: move.promotion ? <Board.SanSquare>move.from : undefined,\n    restoredPiece: <Game.Piece.Model>restoredPiece,\n  };\n}\n","import type { Board } from 'chessboard/model/board/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { getFileRankFromSan } from 'chessboard/model/board/get-file-rank-from-san';\n\n/**\n * Converts the SAN square to view coordinates.\n */\nexport function getCoordsFromSquare<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  square: Board.SanSquare,\n): Board.Coords {\n  const { state, methods } = instance;\n\n  const fileRank = getFileRankFromSan(square);\n\n  const boardPosition = methods.fileRankToPosition(state, fileRank);\n\n  return methods.getViewPosition(state, boardPosition);\n}\n","import type { Board } from 'chessboard/model/board/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { getSanFromFileRank } from 'chessboard/model/board/get-san-from-file-rank';\n\n/**\n * Converts the board position to a SAN square.\n */\nexport function positionToSquare<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  position: WebGLRenderer.BoardPosition,\n): Board.SanSquare | null {\n  const { state, methods } = instance;\n  const fileRank = methods.positionToFileRank(state, position);\n\n  return getSanFromFileRank(fileRank);\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Converts the position to square percentage (from 0 to 100).\n */\nexport function positionToSquarePercentage(\n  position: WebGLRenderer.BoardPosition,\n  squareSize: number,\n): WebGLRenderer.BoardPosition {\n  const positionX = Math.floor(position.x);\n  const positionY = Math.floor(position.y);\n\n  const squarePosition = {\n    left: Math.floor(positionX / squareSize) * squareSize,\n    top: Math.floor(positionY / squareSize) * squareSize,\n  };\n\n  const positionInsideSquare = {\n    left: positionX - squarePosition.left,\n    top: positionY - squarePosition.top,\n  };\n\n  return {\n    x: Math.floor((positionInsideSquare.left / squareSize) * 100),\n    y: Math.floor((positionInsideSquare.top / squareSize) * 100),\n  };\n}\n","import type { Board } from 'chessboard/model/board/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport {\n  positionToSquare,\n  positionToSquarePercentage,\n} from 'chessboard/renderers/webgl/base/utils';\nimport { getBoardXYFromEvent } from 'src/utils/get-board-xy-from-event';\n\n/**\n * Get all the coordinates and squares needed to interact with the board.\n */\nexport function getPointerPosition<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  event: MouseEvent,\n): Board.PointerPosition {\n  const { state, methods } = instance;\n  const { containerEl } = state;\n\n  const coords = <Board.Coords>getBoardXYFromEvent(event, containerEl);\n\n  const viewPosition = methods.normalizePointer(state, coords);\n  const boardPosition = methods.getBoardPosition(state, viewPosition);\n  const positionInsideBoard = methods.positionToNearestSquare(state, boardPosition);\n\n  return {\n    coords: viewPosition,\n    coordsInsideBoard: methods.getViewPosition(state, positionInsideBoard),\n    coordsInsideSquare: positionToSquarePercentage(boardPosition, state.squareSize),\n    square: positionToSquare(instance, boardPosition),\n    squareInsideBoard: positionToSquare(instance, positionInsideBoard),\n  };\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Get the view aspect ratio.\n */\nexport function getViewAspectRatio<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n): number {\n  return instance.methods.getViewAspectRatio();\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Retrieve the canvas element used to render WebGL content.\n */\nexport function getWebGLCanvas<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n): HTMLCanvasElement {\n  return instance.state.viewEl;\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Handle the WebGL context lost.\n */\nexport function handleWebGLContextLost<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n): void {\n  const { state, methods } = instance;\n  const { viewEl } = state;\n\n  const newViewEl = <HTMLCanvasElement>viewEl.cloneNode();\n\n  viewEl.replaceWith(newViewEl);\n\n  state.viewEl = newViewEl;\n\n  methods.onWebGLContextLost(state);\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport type { Game } from 'model/game/types';\n\n/**\n * Get a collection of concise piece objects.\n */\nexport function getPieces<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n): Game.Piece.ConciseObject {\n  const { state } = instance;\n\n  return Object.keys(state.pieces).reduce(\n    (acc, key) => {\n      acc[key] = {\n        color: state.pieces[key].info.color,\n        type: state.pieces[key].info.type as Game.Piece.Types,\n      };\n\n      return acc;\n    },\n    <Game.Piece.ConciseObject>{},\n  );\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Test if the position is inside the board.\n */\nexport function isPositionInsideBoard<T extends WebGLRenderer.State>(\n  state: T,\n  position: WebGLRenderer.BoardPosition,\n): boolean {\n  const { squareSize } = state;\n\n  if (\n    position.x >= 0 &&\n    position.x <= squareSize * 8 &&\n    position.y >= 0 &&\n    position.y <= squareSize * 8\n  ) {\n    return true;\n  }\n\n  return false;\n}\n","import type { Board } from 'chessboard/model/board/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { getBoardXYFromEvent } from 'utils/get-board-xy-from-event';\nimport { isPositionInsideBoard } from 'chessboard/renderers/webgl/base/utils/is-position-inside-board';\n\n/**\n * On mouse double click.\n */\nexport function onMouseDoubleClick<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  event: Event,\n): void {\n  const { state, methods } = instance;\n  const { containerEl, pointer } = state;\n\n  const coords = <Board.Coords>getBoardXYFromEvent(event, containerEl);\n\n  pointer.event = event;\n\n  pointer.viewPosition = methods.normalizePointer(state, coords);\n  pointer.boardPosition = methods.getBoardPosition(state, pointer.viewPosition);\n\n  pointer.insideBoard = isPositionInsideBoard(state, pointer.boardPosition);\n\n  methods.onMouseDoubleClick?.(state);\n\n  pointer.previousViewPosition = pointer.viewPosition;\n  pointer.previousBoardPosition = pointer.boardPosition;\n}\n","import type { Board } from 'chessboard/model/board/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { getBoardXYFromEvent } from 'utils/get-board-xy-from-event';\nimport { isPositionInsideBoard } from 'chessboard/renderers/webgl/base/utils/is-position-inside-board';\n\n/**\n * On mouse wheel.\n */\nexport function onMouseWheel<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  event: WheelEvent,\n): void {\n  const { state, methods } = instance;\n  const { containerEl, pointer } = state;\n\n  const coords = <Board.Coords>getBoardXYFromEvent(event, containerEl);\n\n  pointer.event = event;\n\n  pointer.viewPosition = methods.normalizePointer(state, coords);\n  pointer.boardPosition = methods.getBoardPosition(state, pointer.viewPosition);\n\n  pointer.insideBoard = isPositionInsideBoard(state, pointer.boardPosition);\n\n  const eventHandled = methods.onMouseWheel?.(state, event.deltaY);\n\n  pointer.previousViewPosition = pointer.viewPosition;\n  pointer.previousBoardPosition = pointer.boardPosition;\n\n  if (eventHandled) {\n    event.preventDefault();\n    event.stopImmediatePropagation();\n  }\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Stop the animation of a piece.\n */\nexport function endPieceAnimation<T extends WebGLRenderer.State>(\n  state: T,\n  piece: WebGLRenderer.Piece.Model<any>,\n): void {\n  const { animator, pieceAnimations } = state;\n  const animData = pieceAnimations[piece.id];\n\n  if (!animData || animData.animation.ended) {\n    return;\n  }\n\n  animator.end(animData.animation);\n}\n","import { isTouchEvent } from 'chessboard/model/dom/is-touch-event';\n\n/**\n * Determine whether or not a DOM event is caused by a secondary button, like right or middle button.\n */\nexport function isSecondaryButton(event: MouseEvent | PointerEvent | TouchEvent): boolean {\n  return isTouchEvent(event) ? false : (<MouseEvent | PointerEvent>event).which > 1;\n}\n","import type { Board } from 'chessboard/model/board/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { endPieceAnimation } from 'chessboard/renderers/webgl/base/animation';\nimport { getBoardXYFromEvent } from 'utils/get-board-xy-from-event';\nimport { isPositionInsideBoard } from 'chessboard/renderers/webgl/base/utils/is-position-inside-board';\nimport { isRightButton } from 'chessboard/model/dom/is-right-button';\nimport { isSecondaryButton } from 'chessboard/model/dom/is-secondary-button';\n\n/**\n * On pointer down.\n */\nexport function onPointerDown<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  event: Event,\n): void {\n  const { state, methods } = instance;\n  const { animatedOverPiece, containerEl, pointer } = state;\n\n  const coords = <Board.Coords>getBoardXYFromEvent(event, containerEl);\n\n  pointer.event = event;\n\n  const isRightDown = isRightButton(event as MouseEvent);\n\n  if (!state.isBoardEnabled && !isRightDown) {\n    return;\n  }\n\n  pointer.viewPosition = methods.normalizePointer(state, coords);\n  pointer.boardPosition = methods.getBoardPosition(state, pointer.viewPosition);\n\n  pointer.down = true;\n  pointer.secondaryDown = isSecondaryButton(event as MouseEvent);\n  pointer.rightDown = isRightDown;\n\n  pointer.insideBoard = isPositionInsideBoard(state, pointer.boardPosition);\n  pointer.downInsideBoard = pointer.insideBoard;\n\n  methods.onPointerDown?.(state);\n\n  if (animatedOverPiece) {\n    endPieceAnimation(state, animatedOverPiece);\n\n    state.animatedOverPiece = null;\n  }\n\n  pointer.previousViewPosition = pointer.viewPosition;\n  pointer.previousBoardPosition = pointer.boardPosition;\n}\n","import type { Animator } from 'chessboard/renderers/model/animator/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Animate an item.\n *\n * The purpose of animating an item on the board through this function\n * is to make sure only one animation is playing for it.\n */\nexport function animateItem<T extends WebGLRenderer.State>(\n  state: T,\n  {\n    item,\n    animation,\n    type,\n    onEnd,\n  }: {\n    item: { activeAnimation?: WebGLRenderer.ItemAnimation.Model };\n    animation: Animator.Animation.Model;\n    type: WebGLRenderer.ItemAnimation.Type;\n    onEnd?: Animator.Animation.Callback;\n  },\n): void {\n  const { animator } = state;\n\n  if (item.activeAnimation) {\n    animator.end(item.activeAnimation.animation);\n  }\n\n  item.activeAnimation = { animation, type };\n\n  animation.onEnd(() => {\n    onEnd?.(animation);\n\n    item.activeAnimation = undefined;\n  });\n}\n","import type { Animator } from 'chessboard/renderers/model/animator/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Animate a piece.\n */\nexport function animatePiece<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  {\n    piece,\n    type,\n    animation,\n    onEnd,\n  }: {\n    piece: WebGLRenderer.Piece.Model<any>;\n    type: WebGLRenderer.Piece.Animation.Type;\n    animation: Animator.Animation.Model;\n    onEnd?: Animator.Animation.Callback;\n  },\n): void {\n  const { state } = instance;\n  const { animator, pieceAnimations } = state;\n\n  if (pieceAnimations[piece.id] && !pieceAnimations[piece.id].animation.ended) {\n    animator.end(pieceAnimations[piece.id].animation);\n  }\n\n  pieceAnimations[piece.id] = { animation, type };\n\n  animation.onEnd((endedAnimation) => {\n    onEnd?.(endedAnimation);\n\n    if (pieceAnimations[piece.id] && pieceAnimations[piece.id].animation === endedAnimation) {\n      delete pieceAnimations[piece.id];\n    }\n  });\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Stop the animation of an item.\n */\nexport function endItemAnimation<T extends WebGLRenderer.State>(\n  state: T,\n  item: { activeAnimation?: WebGLRenderer.ItemAnimation.Model },\n): void {\n  const { animator } = state;\n\n  if (item.activeAnimation) {\n    animator.end(item.activeAnimation.animation);\n  }\n\n  item.activeAnimation = undefined;\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Check if a piece is playing an animation.\n */\nexport function isPieceAnimating<T extends WebGLRenderer.State>(\n  state: T,\n  {\n    piece,\n    type,\n  }: {\n    piece?: WebGLRenderer.Piece.Model<any>;\n    type?: WebGLRenderer.Piece.Animation.Type;\n  },\n): boolean {\n  const { pieceAnimations } = state;\n\n  if (piece) {\n    const animData = pieceAnimations[piece.id];\n\n    if (!animData || animData.animation.ended) {\n      return false;\n    }\n\n    if (type && type !== animData.type) {\n      return false;\n    }\n\n    return true;\n  } else if (type) {\n    const animations = Object.values(pieceAnimations);\n\n    for (let i = 0; i < animations.length; i++) {\n      if (animations[i].type === type) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  return false;\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { findPieceFromFileRank } from 'chessboard/renderers/webgl/base/pieces/find-piece-from-file-rank';\n\n/**\n * Find piece from board position.\n */\nexport function findPieceFromPosition<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  position: WebGLRenderer.BoardPosition,\n): WebGLRenderer.Piece.Model<any> | null {\n  const { state, methods } = instance;\n  const fileRank = methods.positionToFileRank(state, position);\n\n  return findPieceFromFileRank(state, fileRank);\n}\n","import type { Board } from 'chessboard/model/board/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Find hint based on a SAN square.\n */\nexport function findHintFromSquare<T extends WebGLRenderer.State>(\n  state: T,\n  square: Board.SanSquare,\n): WebGLRenderer.Hint.Model<any> | null {\n  return Object.values(state.hints).find((hint) => hint.info.square === square) ?? null;\n}\n","import type { Board } from 'chessboard/model/board/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { findHintFromSquare } from 'chessboard/renderers/webgl/base/hints/find-hint-from-square';\nimport { getSanFromFileRank } from 'chessboard/model/board/get-san-from-file-rank';\n\n/**\n * Find hint based on file/rank coordinates.\n */\nexport function findHintFromFileRank<T extends WebGLRenderer.State>(\n  state: T,\n  fileRank: Board.FileRank,\n): WebGLRenderer.Hint.Model<any> | null {\n  const square = getSanFromFileRank(fileRank);\n\n  if (square) {\n    return findHintFromSquare(state, square);\n  }\n\n  return null;\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { findHintFromFileRank } from 'chessboard/renderers/webgl/base/hints/find-hint-from-file-rank';\n\n/**\n * Find hint from board position.\n */\nexport function findHintFromPosition<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  position: WebGLRenderer.BoardPosition,\n): WebGLRenderer.Hint.Model<any> | null {\n  const { state, methods } = instance;\n  const fileRank = methods.positionToFileRank(state, position);\n\n  return findHintFromFileRank(state, fileRank);\n}\n","import type { Board } from 'chessboard/model/board/types';\nimport { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport {\n  animateItem,\n  animatePiece,\n  endItemAnimation,\n  endPieceAnimation,\n  isPieceAnimating,\n} from 'chessboard/renderers/webgl/base/animation';\nimport { findPieceFromPosition } from 'chessboard/renderers/webgl/base/pieces/find-piece-from-position';\nimport { findHintFromPosition } from 'chessboard/renderers/webgl/base/hints/find-hint-from-position';\nimport { getBoardXYFromEvent } from 'utils/get-board-xy-from-event';\nimport { isPositionInsideBoard, positionToSquare } from 'chessboard/renderers/webgl/base/utils';\n\n/**\n * On pointer move.\n */\nexport function onPointerMove<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  event: Event,\n): void {\n  const { state, methods, animationMethods } = instance;\n  const { containerEl, pointer } = state;\n\n  const coords = <Board.Coords>getBoardXYFromEvent(event, containerEl);\n\n  pointer.event = event;\n\n  pointer.previousViewPosition = pointer.viewPosition;\n  pointer.previousBoardPosition = pointer.boardPosition;\n\n  pointer.viewPosition = methods.normalizePointer(state, coords);\n  pointer.boardPosition = methods.getBoardPosition(state, pointer.viewPosition);\n\n  pointer.insideBoard = isPositionInsideBoard(state, pointer.boardPosition);\n\n  methods.onPointerMove?.(state);\n\n  if (!state.isBoardEnabled) {\n    return;\n  }\n\n  if (animationMethods.pieceOver) {\n    doPieceOverAnimation(instance, pointer);\n  }\n\n  if (animationMethods.hintOver) {\n    doHintOverAnimation(instance, pointer);\n  }\n}\n\n/**\n * Handles the piece animations for pointer hovering.\n */\nfunction doPieceOverAnimation<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  pointer: WebGLRenderer.PointerState,\n): void {\n  const { state, animationMethods } = instance;\n  const { animatedOverPiece, selectedPiece } = state;\n\n  const overPiece = findPieceFromPosition(instance, pointer.boardPosition);\n\n  if (\n    animatedOverPiece &&\n    animatedOverPiece !== overPiece &&\n    isPieceAnimating(state, {\n      piece: animatedOverPiece,\n      type: WebGLRenderer.Piece.Animation.Type.Over,\n    })\n  ) {\n    endPieceAnimation(state, animatedOverPiece);\n\n    if (animationMethods.pieceOut) {\n      animatePiece(instance, {\n        animation: animationMethods.pieceOut(state, animatedOverPiece),\n        type: WebGLRenderer.Piece.Animation.Type.Out,\n        piece: animatedOverPiece,\n      });\n    }\n\n    state.animatedOverPiece = null;\n  }\n\n  if (selectedPiece && selectedPiece === overPiece) {\n    return;\n  }\n\n  if (overPiece && !isPieceAnimating(state, { piece: overPiece })) {\n    const previousSquare = positionToSquare(instance, pointer.previousBoardPosition);\n    const currentSquare = positionToSquare(instance, pointer.boardPosition);\n\n    if (previousSquare === currentSquare) {\n      // Pointer was already in (piece dropped), so ignore piece hovering.\n      return;\n    }\n\n    state.animatedOverPiece = overPiece;\n\n    if (animationMethods.pieceOver) {\n      animatePiece(instance, {\n        animation: animationMethods.pieceOver(state, { piece: overPiece, pointer }),\n        type: WebGLRenderer.Piece.Animation.Type.Over,\n        piece: overPiece,\n        onEnd: () => (state.animatedOverPiece = null),\n      });\n    }\n  }\n}\n\n/**\n * Handles the hint animations for pointer hovering.\n */\nfunction doHintOverAnimation<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  pointer: WebGLRenderer.PointerState,\n): void {\n  const { state, animationMethods } = instance;\n  const { animatedOverHint } = state;\n\n  const overHint = findHintFromPosition(instance, pointer.boardPosition);\n\n  if (animatedOverHint && animatedOverHint !== overHint) {\n    endItemAnimation(state, animatedOverHint);\n\n    if (animationMethods.hintOut) {\n      animateItem(state, {\n        item: animatedOverHint,\n        type: WebGLRenderer.ItemAnimation.Type.Out,\n        animation: animationMethods.hintOut(state, animatedOverHint),\n      });\n    }\n\n    state.animatedOverHint = null;\n  }\n\n  if (!overHint) {\n    return;\n  }\n\n  if (\n    animationMethods.hintOver &&\n    overHint.activeAnimation?.type !== WebGLRenderer.ItemAnimation.Type.Over\n  ) {\n    animateItem(state, {\n      item: overHint,\n      type: WebGLRenderer.ItemAnimation.Type.Over,\n      animation: animationMethods.hintOver(state, overHint),\n      onEnd: () => (state.animatedOverHint = null),\n    });\n\n    state.animatedOverHint = overHint;\n  }\n}\n","import type { Board } from 'chessboard/model/board/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { getBoardXYFromEvent } from 'utils/get-board-xy-from-event';\nimport { isPositionInsideBoard } from 'chessboard/renderers/webgl/base/utils/is-position-inside-board';\n\n/**\n * On pointer up.\n */\nexport function onPointerUp<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  event: Event,\n): void {\n  const { state, methods } = instance;\n  const { containerEl, pointer } = state;\n\n  const coords = <Board.Coords>getBoardXYFromEvent(event, containerEl);\n\n  pointer.event = event;\n\n  pointer.viewPosition = methods.normalizePointer(state, coords);\n  pointer.boardPosition = methods.getBoardPosition(state, pointer.viewPosition);\n\n  pointer.down = false;\n  pointer.downInsideBoard = false;\n  pointer.secondaryDown = false;\n  pointer.rightDown = false;\n\n  pointer.insideBoard = isPositionInsideBoard(state, pointer.boardPosition);\n\n  methods.onPointerUp?.(state);\n\n  pointer.previousViewPosition = pointer.viewPosition;\n  pointer.previousBoardPosition = pointer.boardPosition;\n}\n","import { Pointerdown, Pointerup, Pointermove } from 'chessboard/model/dom/get-pointer-events';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { onMouseDoubleClick } from 'chessboard/renderers/webgl/base/listeners/on-mouse-double-click';\nimport { onMouseWheel } from 'chessboard/renderers/webgl/base/listeners/on-mouse-wheel';\nimport { onPointerDown } from 'chessboard/renderers/webgl/base/listeners/on-pointer-down';\nimport { onPointerMove } from 'chessboard/renderers/webgl/base/listeners/on-pointer-move';\nimport { onPointerUp } from 'chessboard/renderers/webgl/base/listeners/on-pointer-up';\n\n/**\n * Add event listeners.\n */\nexport function addEventListeners<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n): void {\n  const { eventListeners, state, methods } = instance;\n  const { containerEl } = state;\n\n  eventListeners.pointerDown = (event) => onPointerDown(instance, event);\n  eventListeners.pointerMove = (event) => onPointerMove(instance, event);\n  eventListeners.pointerUp = (event) => onPointerUp(instance, event);\n\n  containerEl.addEventListener(Pointerdown, eventListeners.pointerDown);\n  document.addEventListener(Pointermove, eventListeners.pointerMove);\n  document.addEventListener(Pointerup, eventListeners.pointerUp);\n\n  if (methods.onMouseDoubleClick) {\n    eventListeners.doubleClick = (event) => onMouseDoubleClick(instance, event);\n\n    containerEl.addEventListener('dblclick', eventListeners.doubleClick);\n  }\n\n  if (methods.onMouseWheel) {\n    eventListeners.wheel = (event) => onMouseWheel(instance, event);\n\n    containerEl.addEventListener('wheel', eventListeners.wheel);\n  }\n}\n","import JCE from '@chesscom/js-chess-engine';\n\n/**\n * Add parameters to the window object.\n */\nexport function addToWindow<T>(params: T): T {\n  Object.assign(<any>window, params, { JCE });\n\n  return params;\n}\n","import type { Animator } from 'chessboard/renderers/model/animator/types';\nimport { easeLinear } from 'chessboard/renderers/model/animator/easing';\n\n/**\n * Updates the animated properties.\n */\nexport function updateAnimatedProperties(animation: Animator.Animation.Model): void {\n  const { animatedProps, animatedPropsKeyframes, frameInfo, isTargetHTMLElement, params } =\n    animation;\n  const { keyframes, target } = params;\n  const { elapsedPercentage } = frameInfo;\n  const easing = params.easing || easeLinear;\n\n  if (!keyframes) {\n    return;\n  }\n\n  let fromValue: number;\n  let toValue: number;\n\n  let fromKeyframe: number;\n  let toKeyframe: number;\n\n  let keyframeElapsedInterval: number;\n\n  Object.keys(animatedProps).forEach((property) => {\n    // Find the keyframes segment.\n    for (let i = 1; i < animatedPropsKeyframes[property].length; i++) {\n      fromKeyframe = animatedPropsKeyframes[property][i - 1];\n      toKeyframe = animatedPropsKeyframes[property][i];\n\n      if (elapsedPercentage >= fromKeyframe && elapsedPercentage <= toKeyframe) {\n        fromValue = keyframes[fromKeyframe][property];\n        toValue = keyframes[toKeyframe][property];\n\n        break;\n      }\n    }\n\n    keyframeElapsedInterval = (elapsedPercentage - fromKeyframe) / (toKeyframe - fromKeyframe);\n    keyframeElapsedInterval = easing(keyframeElapsedInterval);\n\n    animatedProps[property] = fromValue + (toValue - fromValue) * keyframeElapsedInterval;\n\n    if (target && !isTargetHTMLElement) {\n      target[property] = animatedProps[property];\n    }\n  });\n}\n","import type { Animator } from 'chessboard/renderers/model/animator/types';\n\n/**\n * Creates an animation.\n */\nexport function createAnimation(params: Animator.Animation.Params): Animator.Animation.Model {\n  const { data, keyframes, repeat, target, onEnd } = params;\n\n  const animatedProps = getAnimatedProps(keyframes);\n  const animatedPropsKeyframes = getAnimatedPropsKeyframes(animatedProps, keyframes);\n\n  const animation: Animator.Animation.Model = {\n    animatedProps,\n    animatedPropsKeyframes,\n    data: { ...data },\n    endCallbacks: [],\n    ended: false,\n    endTime: 0,\n    forcedEnd: false,\n    frameInfo: {\n      deltaTime: 0,\n      elapsedInterval: 0,\n      elapsedPercentage: 0,\n    },\n    isTargetHTMLElement: target instanceof HTMLElement,\n    onEnd: (callback) => animation.endCallbacks.push(callback),\n    params,\n    repeatCount: repeat || 1,\n    started: false,\n    startTime: 0,\n    keptAlive: false,\n  };\n\n  if (onEnd) {\n    animation.endCallbacks.push(onEnd);\n  }\n\n  return animation;\n}\n\n/**\n * Gather the animated properties.\n */\nfunction getAnimatedProps(keyframes?: Animator.Animation.Keyframes): Animator.AnimatedProps.Model {\n  if (!keyframes) {\n    return {};\n  }\n\n  if (!keyframes[0]) {\n    throw new Error('The animation keyframes must contain values at `0` percentage.');\n  }\n\n  return { ...keyframes[0] };\n}\n\n/**\n * Gather the keyframes for each animated property.\n */\nfunction getAnimatedPropsKeyframes(\n  animatedProps: Animator.AnimatedProps.Model,\n  keyframes?: Animator.Animation.Keyframes,\n): Animator.AnimatedProps.Keyframes {\n  if (!keyframes) {\n    return {};\n  }\n\n  const animatedPropsList = Object.keys(animatedProps);\n  const animatedPropsKeyframes: Animator.AnimatedProps.Keyframes = {};\n\n  animatedPropsList.forEach((property) => (animatedPropsKeyframes[property] = []));\n\n  Object.keys(keyframes)\n    .sort((a, b) => parseInt(a, 10) - parseInt(b, 10))\n    .forEach((key) => {\n      animatedPropsList.forEach((property) => {\n        if (keyframes[key][property] !== undefined) {\n          animatedPropsKeyframes[property].push(parseInt(key, 10));\n        }\n      });\n    });\n\n  return animatedPropsKeyframes;\n}\n","import type { Animator } from 'chessboard/renderers/model/animator/types';\nimport { updateAnimatedProperties } from 'chessboard/renderers/model/animator/update-animated-properties';\nimport { createAnimation } from 'chessboard/renderers/model/animator/create-animation';\n\n/**\n * Create an animation manager.\n */\nexport function createAnimator(manualUpdate: boolean = false): Animator.API {\n  /**\n   * The animations currently playing.\n   */\n  const playingAnimations: Animator.Animation.Model[] = [];\n\n  /**\n   * The request id returned by `requestAnimationFrame`.\n   */\n  let frameRequestId = 0;\n\n  /**\n   * Last animation frame time (used to calculate delta time).\n   */\n  let frameTime = 0;\n\n  return {\n    end,\n    endAll,\n    play,\n    playingAnimations,\n    playingAnimationsCount: () => playingAnimations.length,\n    update,\n  };\n\n  /**\n   * The animation loop.\n   */\n  function animationLoop(time: number): void {\n    const deltaTime = (time - frameTime) * 0.001;\n\n    playingAnimations.forEach((animation) => {\n      if (animation.startTime > time) {\n        // `true` when using `repeatDelay`\n        return;\n      }\n\n      const frameInfo = animation.frameInfo;\n\n      frameInfo.deltaTime = deltaTime;\n\n      if (!animation.started && !onAnimationStart(animation, time)) {\n        return;\n      }\n\n      if (animation.endTime) {\n        // Ignore if animation plays indefinitely.\n\n        frameInfo.elapsedInterval =\n          (time - animation.startTime) / (animation.endTime - animation.startTime);\n\n        if (frameInfo.elapsedInterval > 1) {\n          frameInfo.elapsedInterval = 1;\n        }\n\n        frameInfo.elapsedPercentage = Math.round(frameInfo.elapsedInterval * 100);\n      }\n\n      onAnimationUpdate(animation);\n\n      if (animation.endTime && animation.endTime <= time) {\n        onAnimationEnd(animation);\n      }\n    });\n\n    frameTime = time;\n\n    if (playingAnimations.length && !manualUpdate) {\n      frameRequestId = requestAnimationFrame(animationLoop);\n    }\n  }\n\n  /**\n   * Ends an animation.\n   */\n  function end(animation: Animator.Animation.Model): void {\n    if (animation.ended || playingAnimations.indexOf(animation) < 0) {\n      return;\n    }\n\n    animation.frameInfo.elapsedInterval = 1;\n    animation.frameInfo.elapsedPercentage = 100;\n\n    onAnimationUpdate(animation);\n    onAnimationEnd(animation, true);\n  }\n\n  /**\n   * End all animations.\n   */\n  function endAll(): void {\n    [...playingAnimations].forEach(end);\n  }\n\n  /**\n   * Ends the animation playback.\n   */\n  function onAnimationEnd(animation: Animator.Animation.Model, forcedEnd = false): void {\n    const { duration, keepAlive, repeatDelay } = animation.params;\n\n    animation.repeatCount--;\n    animation.forcedEnd = forcedEnd;\n\n    if (!forcedEnd && animation.repeatCount > 0 && duration && duration !== Infinity) {\n      animation.startTime = animation.endTime + (repeatDelay || 0);\n      animation.endTime = animation.startTime + duration;\n\n      return;\n    }\n\n    if (!forcedEnd && keepAlive) {\n      animation.keptAlive = true;\n\n      return;\n    }\n\n    animation.ended = true;\n    animation.endCallbacks.forEach((callback) => callback(animation));\n\n    removeAnimation(animation);\n  }\n\n  /**\n   * Starts playing the animation.\n   */\n  function onAnimationStart(animation: Animator.Animation.Model, time: number): boolean {\n    const { duration, delay, onStart } = animation.params;\n\n    if (!animation.startTime) {\n      animation.startTime = time + (delay || 0);\n\n      if (duration && duration !== Infinity) {\n        animation.endTime = animation.startTime + duration;\n      }\n    }\n\n    if (animation.startTime > time) {\n      return false;\n    }\n\n    animation.started = true;\n\n    onStart?.(animation);\n\n    return true;\n  }\n\n  /**\n   * Process an animation frame.\n   */\n  function onAnimationUpdate(animation: Animator.Animation.Model): void {\n    const { onUpdate } = animation.params;\n\n    updateAnimatedProperties(animation);\n\n    onUpdate?.(animation);\n  }\n\n  /**\n   * Plays an animation.\n   */\n  function play(params: Animator.Animation.Params): Animator.Animation.Model {\n    const animation = createAnimation(params);\n\n    playingAnimations.push(animation);\n\n    if (!frameRequestId && !manualUpdate) {\n      startAnimationLoop();\n    }\n\n    return animation;\n  }\n\n  /**\n   * Removes an animation.\n   */\n  function removeAnimation(animation: Animator.Animation.Model): void {\n    const animationIndex = playingAnimations.indexOf(animation);\n\n    if (animationIndex >= 0) {\n      playingAnimations.splice(animationIndex, 1);\n    }\n\n    if (!playingAnimations.length && !manualUpdate) {\n      stopAnimationLoop();\n    }\n  }\n\n  /**\n   * Starts the animation loop.\n   */\n  function startAnimationLoop(): void {\n    frameTime = performance.now();\n    frameRequestId = requestAnimationFrame(animationLoop);\n  }\n\n  /**\n   * Stops the animation loop.\n   */\n  function stopAnimationLoop(): void {\n    if (frameRequestId) {\n      cancelAnimationFrame(frameRequestId);\n    }\n\n    frameRequestId = 0;\n  }\n\n  /**\n   * Updates an animation frame.\n   */\n  function update(time: number): void {\n    animationLoop(time);\n  }\n}\n","import type { Board } from 'chessboard/model/board/types';\nimport { Constants } from 'chessboard/renderers/webgl/base/constants';\nimport type { LegacyThemes } from 'chessboard/config/legacy-themes';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { createAnimator } from 'chessboard/renderers/model/animator';\n\n/**\n * Create the WebGL board's base state.\n */\nexport function createBaseState(\n  containerEl: HTMLElement,\n  {\n    options,\n    boardThemes,\n    pieceThemes,\n  }: {\n    options: Board.Options;\n    boardThemes: LegacyThemes.BoardStyles;\n    pieceThemes: LegacyThemes.PieceStyles;\n  },\n): WebGLRenderer.State {\n  const animator = createAnimator(true);\n\n  return {\n    animatedOverPiece: null,\n    animatedOverHint: null,\n    animator,\n    attackedKing: null,\n    arrows: {},\n    assetsLoaded: false,\n    blinkingHighlights: {},\n    boardId: options.id || 'webglBoard',\n    boardStyle: options.boardStyle,\n    boardThemes,\n    containerEl,\n    customItems: {},\n    destroyed: false,\n    effects: {},\n    fadeSetupAnimation: null,\n    flipCoordinates: false,\n    highlights: {},\n    hints: {},\n    hoverSquare: null,\n    isBoardFlipped: options.flipped,\n    isBoardEnabled: options.enabled,\n    isCheckmate: false,\n    isPromotionWindowVisible: false,\n    options,\n    pieceAnimations: {},\n    pieces: {},\n    pieceStyle: options.pieceStyle,\n    pieceThemes,\n    pointer: {\n      boardPosition: { x: 0, y: 0 },\n      down: false,\n      downInsideBoard: false,\n      event: new Event(''),\n      insideBoard: false,\n      previousBoardPosition: { x: 0, y: 0 },\n      previousViewPosition: { x: 0, y: 0 },\n      rightDown: false,\n      secondaryDown: false,\n      viewPosition: { x: 0, y: 0 },\n    },\n    promotionWindowAnimation: null,\n    selectedPiece: null,\n    squareSize: 0,\n    viewEl: document.createElement('canvas'),\n    viewSize: {\n      width: <number>Constants.Board.DefaultWidth,\n      height: <number>Constants.Board.DefaultHeight,\n    },\n    takeover: [],\n  };\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Updates the pieces' visuals.\n */\nexport function updatePiecesVisuals<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n): void {\n  const { state, methods } = instance;\n\n  Object.values(state.pieces).forEach((piece) => {\n    methods.updatePieceVisuals(state, piece);\n  });\n\n  methods.onPiecesVisualsChanged?.(state);\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { updatePiecesVisuals } from 'chessboard/renderers/webgl/base/pieces';\n\n/**\n * Load the assets.\n */\nexport function loadAssets<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n): Promise<void> {\n  const { state, methods, animationMethods } = instance;\n\n  return Promise.all([methods.loadAssets(state), animationMethods.loadAssets?.(state)]).then(() => {\n    if (state.destroyed) {\n      return;\n    }\n\n    state.assetsLoaded = true;\n\n    updatePiecesVisuals(instance);\n\n    state.containerEl.appendChild(state.viewEl);\n  });\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * The update loop.\n */\nexport function updateLoop<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  time: number,\n): void {\n  const { state, methods } = instance;\n\n  state.animator.update(time);\n\n  methods.render(state, time);\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { addEventListeners } from 'chessboard/renderers/webgl/base/listeners/add-event-listeners';\nimport { addToWindow } from 'utils/add-to-window';\nimport { createBaseState, loadAssets, updateLoop } from 'chessboard/renderers/webgl/base/main';\nimport { setTestData, TestElements, TestKeys } from 'utils/set-test-data';\nimport { Core } from 'chessboard/core/config/types';\n\n/**\n * Initialize the WebGL renderer instance.\n */\nexport function init<T extends WebGLRenderer.State>(\n  params: WebGLRenderer.Params<T>,\n): WebGLRenderer.Instance<T> {\n  const {\n    animationMethods,\n    boardThemes,\n    className,\n    containerEl,\n    options,\n    methods,\n    name,\n    pieceThemes,\n    testElement,\n  } = params;\n\n  const state = methods.createState(\n    createBaseState(containerEl, { boardThemes, options, pieceThemes }),\n  );\n\n  const instance = {\n    animationMethods,\n    className,\n    eventListeners: {},\n    frameRequestId: 0,\n    lastPieceId: 0,\n    methods,\n    name,\n    state,\n  };\n\n  methods.init(state);\n  animationMethods.init?.(state);\n\n  state.hoverSquare = animationMethods.createHoverSquareObj\n    ? animationMethods.createHoverSquareObj(state)\n    : methods.createHoverSquareObj(state);\n\n  loadAssets(instance).then(() => {\n    params.emitter.emit(Core.InstanceEvents.WebGLAssetsInitialized, {\n      type: Core.InstanceEvents.WebGLAssetsInitialized,\n    });\n  });\n  addEventListeners(instance);\n\n  containerEl.classList.add(className);\n\n  onAnimatedFrameReceived(performance.now());\n\n  if (options.test) {\n    setupTestData(state, testElement);\n  }\n\n  return instance;\n\n  /**\n   * Call the next loop.\n   */\n  function onAnimatedFrameReceived(time: number): void {\n    instance.frameRequestId = requestAnimationFrame(onAnimatedFrameReceived);\n\n    updateLoop(instance, time);\n  }\n}\n\n/**\n * Add neccessary data for testing.\n */\nfunction setupTestData<T extends WebGLRenderer.State>(state: T, testElement?: TestElements): void {\n  setTestData(state.containerEl, {\n    [TestKeys.Element]: testElement || TestElements.Board,\n  });\n\n  if (testElement === TestElements.SiblingBoard) {\n    addToWindow({ webglSiblingBoardState: state });\n  } else {\n    addToWindow({ webglBoardState: state });\n  }\n}\n","import { Pointerdown, Pointerup, Pointermove } from 'chessboard/model/dom/get-pointer-events';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Remove event listeners.\n */\nexport function removeEventListeners<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n): void {\n  const { eventListeners, state } = instance;\n  const { containerEl } = state;\n\n  if (eventListeners.pointerDown) {\n    containerEl.removeEventListener(Pointerdown, eventListeners.pointerDown);\n  }\n\n  if (eventListeners.pointerMove) {\n    document.removeEventListener(Pointermove, eventListeners.pointerMove);\n  }\n\n  if (eventListeners.pointerUp) {\n    document.removeEventListener(Pointerup, eventListeners.pointerUp);\n  }\n\n  if (eventListeners.doubleClick) {\n    containerEl.removeEventListener('dblclick', eventListeners.doubleClick);\n  }\n\n  if (eventListeners.wheel) {\n    containerEl.removeEventListener('wheel', eventListeners.wheel);\n  }\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { removeEventListeners } from 'chessboard/renderers/webgl/base/listeners/remove-event-listeners';\n\n/**\n * Destroy the renderer.\n */\nexport function destroy<T extends WebGLRenderer.State>(instance: WebGLRenderer.Instance<T>): void {\n  const { className, frameRequestId, state, methods } = instance;\n  const { animator, containerEl, viewEl } = state;\n\n  state.destroyed = true;\n\n  animator.endAll();\n\n  if (frameRequestId) {\n    cancelAnimationFrame(frameRequestId);\n  }\n\n  methods.destroy(state);\n\n  removeEventListeners(instance);\n\n  viewEl.parentNode?.removeChild(viewEl);\n  containerEl.classList.remove(className);\n}\n","import { AnimationTypes } from 'chessboard/renderers/config/types';\nimport { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Check if the renderer is playing animations.\n */\nexport function isAnimating<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  animationType?: AnimationTypes,\n): boolean {\n  const { state } = instance;\n  const { animator } = state;\n\n  if (animationType === AnimationTypes.Move) {\n    const { pieceAnimations } = state;\n    let playingAnimationsCount = 0;\n\n    Object.values(pieceAnimations).forEach((animData) => {\n      const { animation, type } = animData;\n\n      if (\n        ![\n          WebGLRenderer.Piece.Animation.Type.Capture,\n          WebGLRenderer.Piece.Animation.Type.Drop,\n          WebGLRenderer.Piece.Animation.Type.Move,\n          WebGLRenderer.Piece.Animation.Type.Restore,\n        ].includes(type)\n      ) {\n        return;\n      }\n\n      if (animation && !animation.ended) {\n        playingAnimationsCount++;\n      }\n    });\n\n    return playingAnimationsCount > 0;\n  }\n\n  return animator.playingAnimationsCount() > 0;\n}\n","import type { Board } from 'chessboard/model/board/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { getFileRankFromSan } from 'chessboard/model/board/get-file-rank-from-san';\n\n/**\n * Find piece position from a SAN square.\n */\nexport function squareToPiecePosition<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  square: Board.SanSquare,\n): WebGLRenderer.BoardPosition {\n  const { state, methods } = instance;\n  const fileRank = getFileRankFromSan(square);\n\n  return methods.fileRankToPosition(state, fileRank);\n}\n","import type { DragPiece } from 'chessboard/renderers/config/types';\nimport { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport {\n  animatePiece,\n  endPieceAnimation,\n  isPieceAnimating,\n} from 'chessboard/renderers/webgl/base/animation';\nimport { findPieceFromSquare } from 'chessboard/renderers/webgl/base/pieces';\nimport { squareToPiecePosition } from 'chessboard/renderers/webgl/base/utils';\n\n/**\n * Drag a piece on the board.\n */\nexport function dragPiece<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  draggedPieceInfo: DragPiece,\n): void {\n  const { state, methods, animationMethods } = instance;\n\n  let position: WebGLRenderer.BoardPosition | null = null;\n\n  if (draggedPieceInfo.toSquare) {\n    position = squareToPiecePosition(instance, draggedPieceInfo.toSquare);\n  } else if (draggedPieceInfo.coords) {\n    position = methods.getBoardPosition(state, draggedPieceInfo.coords);\n  }\n\n  if (!position) {\n    return;\n  }\n\n  const piece = findPieceFromSquare<T>(state, draggedPieceInfo.square);\n\n  if (!piece) {\n    return;\n  }\n\n  if (!isPieceAnimating(state, { piece, type: WebGLRenderer.Piece.Animation.Type.Drag })) {\n    endPieceAnimation(state, piece);\n  }\n\n  methods.setPiecePosition(piece, position);\n\n  if (!state.selectedPiece && animationMethods.dragPiece) {\n    animatePiece(instance, {\n      animation: animationMethods.dragPiece(state, piece),\n      type: WebGLRenderer.Piece.Animation.Type.Drag,\n      piece,\n    });\n  }\n\n  state.selectedPiece = piece;\n\n  methods.onPieceDrag?.(state, piece);\n}\n","import type { Core } from 'chessboard/core/config/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { updatePiecesVisuals } from 'chessboard/renderers/webgl/base/pieces';\n\n/**\n * Change the pieces' style.\n */\nexport function changePiecesStyle<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  context: Core.Context,\n  fallback = false,\n): void {\n  const { state, methods } = instance;\n  const { pieceStyle, themeAssets } = context.options;\n\n  state.pieceStyle = pieceStyle;\n  state.options.themeAssets = themeAssets;\n\n  methods.updatePiecesStyle(state, fallback).then(() => {\n    if (!state.assetsLoaded) {\n      return;\n    }\n\n    updatePiecesVisuals(instance);\n  });\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport type JCE from '@chesscom/js-chess-engine';\n\n/**\n * Replace a piece with another.\n */\nexport function swapPiece<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  {\n    piece,\n    type,\n  }: {\n    piece: WebGLRenderer.Piece.Model<any>;\n    type?: JCE.PieceSignature;\n  },\n): void {\n  const { state, methods } = instance;\n\n  if (type) {\n    piece.info.type = type;\n  }\n\n  methods.updatePieceVisuals(state, piece);\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * End all pieces' animation.\n */\nexport function endAllPiecesAnimation<T extends WebGLRenderer.State>(\n  state: T,\n  type?: WebGLRenderer.Piece.Animation.Type,\n): void {\n  const { animator, pieceAnimations } = state;\n\n  Object.keys(pieceAnimations).forEach((key) => {\n    const animData = pieceAnimations[key];\n\n    if (type && type !== animData.type) {\n      return;\n    }\n\n    animator.end(animData.animation);\n\n    delete pieceAnimations[key];\n  });\n}\n","import type { Animator } from 'chessboard/renderers/model/animator/types';\nimport type { Board } from 'chessboard/model/board/types';\nimport { Game } from 'chessboard/model/game/types';\nimport { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport {\n  animatePiece,\n  endAllPiecesAnimation,\n  isPieceAnimating,\n} from 'chessboard/renderers/webgl/base/animation';\nimport { isCapture } from 'chessboard/model/move/is-capture';\nimport { isCastle } from 'chessboard/model/move/is-castle';\nimport { squareToPiecePosition } from 'chessboard/renderers/webgl/base/utils';\nimport { nodeTargetSquare } from 'api/move/model/node-target-square';\n\n/**\n * Move a piece from one square to another.\n */\nexport function movePieces<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  moves: Game.Move.Extended[],\n): void {\n  const { state, methods, animationMethods } = instance;\n  const { attackedKing, pieces, pointer } = state;\n\n  let castling = isCastle(moves[0]);\n  const capturing = isCapture(moves[0]);\n  const movedPieces: WebGLRenderer.Piece.Collection<any> = {};\n\n  if (!castling && moves.length === 2) {\n    // check for castling undo\n    const piece1 = pieces[<Board.SanSquare>moves[0].from];\n    const piece2 = pieces[<Board.SanSquare>moves[1].from];\n\n    if (piece1.info.type === Game.Piece.Types.King && piece2.info.type === Game.Piece.Types.Rook) {\n      castling = true;\n    }\n  }\n\n  moves.forEach((move) => {\n    const moveTo = nodeTargetSquare(move);\n\n    if (!moveTo) {\n      return;\n    }\n\n    const piece = pieces[<Board.SanSquare>move.from];\n    const fromPosition = squareToPiecePosition(instance, <Board.SanSquare>move.from);\n    const toPosition = squareToPiecePosition(instance, moveTo);\n\n    let animation: Animator.Animation.Model | null = null;\n    let animationType = WebGLRenderer.Piece.Animation.Type.Move;\n\n    if (move.userGeneratedDrop && animationMethods.dropPiece) {\n      methods.setPiecePosition(piece, pointer.boardPosition);\n\n      animation = animationMethods.dropPiece(state, { capturing, piece, to: toPosition });\n      animationType = WebGLRenderer.Piece.Animation.Type.Drop;\n    } else if (!move.userGeneratedDrop && move.animate && move.from !== moveTo) {\n      animation = animationMethods.movePiece(state, {\n        capturing,\n        castling,\n        from: fromPosition,\n        piece,\n        to: toPosition,\n      });\n    }\n\n    if (animation) {\n      animatePiece(instance, {\n        animation,\n        type: animationType,\n        piece,\n        onEnd: ({ forcedEnd }) => {\n          methods.onPieceMoved?.(state, { piece, square: moveTo });\n\n          if (forcedEnd || !animationMethods.attackKing) {\n            return;\n          }\n\n          if (\n            move.san && // `move.san` is used to check for main move since one of the moves can be a rook move.\n            attackedKing &&\n            !isPieceAnimating(state, {\n              piece: attackedKing,\n              type: WebGLRenderer.Piece.Animation.Type.KingAttack,\n            })\n          ) {\n            animatePiece(instance, {\n              animation: animationMethods.attackKing(state, { piece: attackedKing }),\n              type: WebGLRenderer.Piece.Animation.Type.KingAttack,\n              piece: attackedKing,\n            });\n          }\n        },\n      });\n    } else {\n      methods.setPiecePosition(piece, toPosition);\n      methods.onPieceMoved?.(state, { piece, square: moveTo });\n    }\n\n    if (\n      !attackedKing &&\n      isPieceAnimating(state, { type: WebGLRenderer.Piece.Animation.Type.KingAttack })\n    ) {\n      endAllPiecesAnimation(state, WebGLRenderer.Piece.Animation.Type.KingAttack);\n    }\n\n    if (move.from !== moveTo) {\n      piece.info.square = moveTo;\n\n      movedPieces[<Board.SanSquare>move.from] = piece;\n    }\n  });\n\n  Object.keys(movedPieces).forEach((from) => {\n    const piece = movedPieces[from];\n    const oldPiece = pieces[from];\n\n    pieces[<Board.SanSquare>piece.info.square] = piece;\n\n    if (piece.info.type === oldPiece.info.type && piece.info.color === oldPiece.info.color) {\n      delete pieces[from];\n    }\n  });\n}\n","import type { Board } from 'model/board/types';\nimport { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { animatePiece, endPieceAnimation } from 'chessboard/renderers/webgl/base/animation';\n\n/**\n * Remove a piece from the board.\n */\nexport function removePiece<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  {\n    captured,\n    fromDrop,\n    square,\n  }: {\n    captured?: boolean;\n    fromDrop?: boolean;\n    square: Board.SanSquare;\n  },\n): void {\n  const { state, methods, animationMethods } = instance;\n  const { pieces } = state;\n\n  const piece = state.pieces[square];\n\n  if (!piece) {\n    return;\n  }\n\n  endPieceAnimation(state, piece);\n\n  if (captured && animationMethods.capturePiece) {\n    animatePiece(instance, {\n      animation: animationMethods.capturePiece(state, { fromDrop, piece }),\n      type: WebGLRenderer.Piece.Animation.Type.Capture,\n      piece,\n      onEnd: () => methods.removePiece(state, piece),\n    });\n  } else {\n    methods.removePiece(state, piece);\n  }\n\n  delete pieces[square];\n\n  if (state.selectedPiece === piece) {\n    state.selectedPiece = null;\n  }\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Generate a new piece ID.\n */\nexport function generatePieceId<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n): number {\n  return ++instance.lastPieceId;\n}\n","import type { Board } from 'model/board/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { generatePieceId } from 'chessboard/renderers/webgl/base/pieces';\nimport { squareToPiecePosition } from 'chessboard/renderers/webgl/base/utils';\n\n/**\n * Add a piece on the board.\n */\nexport function addPiece<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  pieceInfo: WebGLRenderer.Piece.Info,\n): WebGLRenderer.Piece.Model<any> {\n  const { state, methods } = instance;\n\n  const piece: WebGLRenderer.Piece.Model<any> = {\n    id: generatePieceId(instance),\n    info: pieceInfo,\n    obj: methods.createPieceObj(state, pieceInfo),\n  };\n\n  const piecePosition = squareToPiecePosition(instance, <Board.SanSquare>pieceInfo.square);\n\n  if (state.assetsLoaded) {\n    methods.updatePieceVisuals(state, piece);\n  }\n\n  methods.setPiecePosition(piece, piecePosition);\n  methods.addPiece(state, piece);\n\n  state.pieces[<Board.SanSquare>pieceInfo.square] = piece;\n\n  return piece;\n}\n","import type { Game } from 'chessboard/model/game/types';\n\n/**\n * Determine from the SAN if a move is checkmate.\n */\nexport function isCheckmate(move: Game.Move.Model): boolean {\n  if (!move || !move.san) {\n    return false;\n  }\n\n  return ['#'].includes(move.san.slice(-1));\n}\n","import type { Board } from 'chessboard/model/board/types';\nimport { Game } from 'chessboard/model/game/types';\nimport { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { swapPiece } from 'chessboard/renderers/webgl/base/pieces';\nimport { movePieces } from 'chessboard/renderers/webgl/base/pieces/move-pieces';\nimport { removePiece } from 'chessboard/renderers/webgl/base/pieces/remove-piece';\nimport { addPiece } from 'chessboard/renderers/webgl/base/pieces/add-piece';\nimport { getUndoMoveDetails } from 'chessboard/renderers/model/get-undo-move-details';\nimport { animatePiece, endAllPiecesAnimation } from 'chessboard/renderers/webgl/base/animation';\nimport { isCheckmate } from 'chessboard/model/move/is-checkmate';\n\n/**\n * Undo the last move.\n */\nexport function undoMove<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  {\n    move,\n    attackedKingSquare,\n  }: {\n    move: Game.Move.ExtendedNode;\n    attackedKingSquare?: Board.SanSquare;\n  },\n): void {\n  const { state, animationMethods } = instance;\n  const { pieces } = state;\n  const { movedPieces, restoredPiece, promotedSquare } = getUndoMoveDetails(move);\n\n  endAllPiecesAnimation(state);\n\n  if (move.drop) {\n    removePiece(instance, { square: move.to });\n\n    return;\n  }\n\n  state.attackedKing = attackedKingSquare ? pieces[attackedKingSquare] : null;\n  state.isCheckmate = isCheckmate(move);\n\n  movePieces(instance, <Game.Move.Extended[]>movedPieces);\n\n  if (restoredPiece) {\n    const addedPiece = addPiece(instance, restoredPiece);\n\n    if (animationMethods.restorePiece) {\n      animatePiece(instance, {\n        animation: animationMethods.restorePiece(state, addedPiece),\n        type: WebGLRenderer.Piece.Animation.Type.Restore,\n        piece: addedPiece,\n      });\n    }\n  }\n\n  if (promotedSquare) {\n    const promotedPiece = pieces[promotedSquare];\n\n    swapPiece(instance, { piece: promotedPiece, type: Game.Piece.Types.Pawn });\n  }\n}\n","import type { Board } from 'model/board/types';\nimport { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport {\n  animatePiece,\n  endPieceAnimation,\n  isPieceAnimating,\n} from 'chessboard/renderers/webgl/base/animation';\nimport { squareToPiecePosition } from 'chessboard/renderers/webgl/base/utils';\n\n/**\n * Drop a piece on the board.\n */\nexport function dropPiece<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  square: Board.SanSquare,\n): void {\n  const { state, methods, animationMethods } = instance;\n  const { selectedPiece } = state;\n\n  if (!selectedPiece) {\n    return;\n  }\n\n  endPieceAnimation(state, selectedPiece);\n\n  const position = squareToPiecePosition(instance, square);\n\n  if (\n    animationMethods.dropPiece &&\n    square === selectedPiece.info.square // rely on `makeMove` to animate the move drop\n  ) {\n    animatePiece(instance, {\n      animation: animationMethods.dropPiece(state, { piece: selectedPiece, to: position }),\n      type: WebGLRenderer.Piece.Animation.Type.Drop,\n      piece: selectedPiece,\n      onEnd: ({ forcedEnd }) => {\n        if (forcedEnd || !animationMethods.attackKing || selectedPiece.info.square === square) {\n          return;\n        }\n\n        // Important: reading `attackedKing` directly from `state` is required,\n        // since that is set inside `makeMove` which is called after `dropPiece`.\n        if (\n          state.attackedKing &&\n          !isPieceAnimating(state, {\n            piece: state.attackedKing,\n            type: WebGLRenderer.Piece.Animation.Type.KingAttack,\n          })\n        ) {\n          animatePiece(instance, {\n            animation: animationMethods.attackKing(state, { piece: state.attackedKing }),\n            type: WebGLRenderer.Piece.Animation.Type.KingAttack,\n            piece: state.attackedKing,\n          });\n        }\n      },\n    });\n  }\n\n  methods.setPiecePosition(selectedPiece, position);\n  methods.onPieceDrop?.(state, selectedPiece);\n\n  state.selectedPiece = null;\n}\n","import type { Board } from 'chessboard/model/board/types';\nimport { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { animatePiece } from 'chessboard/renderers/webgl/base/animation';\nimport { findPieceFromSquare } from 'chessboard/renderers/webgl/base/pieces/find-piece-from-square';\n\n/**\n * Respond to an illegal move.\n */\nexport function illegalMove<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  kingInCheck: false | Board.SanSquare,\n): void {\n  const { state, animationMethods } = instance;\n\n  if (kingInCheck && animationMethods.attackKing) {\n    const kingPiece = findPieceFromSquare(state, kingInCheck);\n\n    if (!kingPiece) {\n      return;\n    }\n\n    animatePiece(instance, {\n      animation: animationMethods.attackKing(state, { piece: kingPiece, illegalMove: true }),\n      type: WebGLRenderer.Piece.Animation.Type.KingAttack,\n      piece: kingPiece,\n    });\n  }\n}\n","import type { Board } from 'model/board/types';\nimport type { Game } from 'chessboard/model/game/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { addPiece } from 'chessboard/renderers/webgl/base/pieces/add-piece';\nimport { removePiece } from 'chessboard/renderers/webgl/base/pieces/remove-piece';\nimport { endAllPiecesAnimation } from 'chessboard/renderers/webgl/base/animation';\n\n/**\n * Load pieces on the board.\n */\nexport function loadPieces<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  {\n    piecesInfo,\n    reloadAll,\n  }: {\n    piecesInfo: Game.Piece.Collection;\n    reloadAll?: boolean;\n  },\n) {\n  const { state, methods } = instance;\n\n  endAllPiecesAnimation(state);\n\n  if (reloadAll) {\n    Object.values(state.pieces).forEach((piece) => {\n      removePiece(instance, { square: <Board.SanSquare>piece.info.square });\n    });\n  } else {\n    // Remove pieces that no longer exist or are different\n    Object.values(state.pieces).forEach((piece) => {\n      const pieceInfo = piece.info;\n      const square = <Board.SanSquare>pieceInfo.square;\n\n      const newPieceInfo = piecesInfo.isDefined(square) ? piecesInfo.get(square) : null;\n\n      if (\n        !newPieceInfo ||\n        pieceInfo.type !== newPieceInfo.type ||\n        pieceInfo.color !== newPieceInfo.color\n      ) {\n        removePiece(instance, { square });\n      }\n    });\n  }\n\n  // Add the new pieces on the board\n  piecesInfo\n    .keys()\n    .filter((square) => !state.pieces[square])\n    .forEach((square) => {\n      const piece = piecesInfo.get(square);\n\n      addPiece(instance, piece);\n    });\n\n  methods.onPiecesLoaded?.(state);\n}\n","import type { Board } from 'chessboard/model/board/types';\nimport type { Game } from 'chessboard/model/game/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { swapPiece } from 'chessboard/renderers/webgl/base/pieces';\nimport { movePieces } from 'chessboard/renderers/webgl/base/pieces/move-pieces';\nimport { removePiece } from 'chessboard/renderers/webgl/base/pieces/remove-piece';\nimport { addPiece } from 'chessboard/renderers/webgl/base/pieces/add-piece';\nimport { endAllPiecesAnimation } from 'chessboard/renderers/webgl/base/animation';\nimport { isCheckmate } from 'chessboard/model/move/is-checkmate';\nimport { nodeTargetSquare } from 'api/move/model/node-target-square';\n\n/**\n * Make a piece move.\n */\nexport function makeMove<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  {\n    move,\n    attackedKingSquare,\n  }: {\n    move: Game.Move.Extended;\n    attackedKingSquare?: Board.SanSquare;\n  },\n): void {\n  const { state } = instance;\n  const { pieces } = state;\n\n  endAllPiecesAnimation(state);\n\n  if (move.drop) {\n    addPiece(instance, {\n      color: move.color,\n      square: nodeTargetSquare(move),\n      type: move.drop,\n    });\n\n    return;\n  }\n\n  state.attackedKing = attackedKingSquare ? pieces[attackedKingSquare] : null;\n  state.isCheckmate = isCheckmate(move);\n\n  if (move.EPCapturedSquare) {\n    removePiece(instance, {\n      captured: true,\n      square: move.EPCapturedSquare,\n      fromDrop: move.userGeneratedDrop,\n    });\n  } else if (move.captured) {\n    removePiece(instance, {\n      captured: true,\n      square: move.to,\n      fromDrop: move.userGeneratedDrop,\n    });\n  }\n\n  const moves = [move, move.rookMove].filter(Boolean);\n\n  movePieces(instance, <Game.Move.Extended[]>moves);\n\n  if (move.promotion) {\n    const promotedPiece = pieces[move.to];\n\n    swapPiece(instance, { piece: promotedPiece, type: move.promotion });\n  }\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Add the analysis overlay.\n */\nexport function addAnalysisOverlay<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n): void {\n  const { state, methods } = instance;\n\n  methods.addAnalysisOverlay(state);\n}\n","import type { Core } from 'chessboard/core/config/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Change the board's style.\n */\nexport function changeBoardStyle<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  context: Core.Context,\n): void {\n  const { state, methods } = instance;\n  const { coordinates, flipped } = state.options;\n  const { boardStyle, themeAssets } = context.options;\n\n  state.boardStyle = boardStyle;\n  state.options.themeAssets = themeAssets;\n\n  methods.updateBoardStyle(state);\n  methods.updateBoardCoordinates(state, { colorUpdate: true, flipped, position: coordinates });\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Fade the pieces setup.\n */\nexport function fadeSetup<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  fadeDuration: number,\n): void {\n  const { state, methods } = instance;\n  const { animator } = state;\n\n  if (state.fadeSetupAnimation) {\n    animator.end(state.fadeSetupAnimation);\n  }\n\n  if (fadeDuration === 0) {\n    return;\n  }\n\n  state.fadeSetupAnimation = methods.fadeInAllPieces(state, fadeDuration);\n  state.fadeSetupAnimation.onEnd(() => (state.fadeSetupAnimation = null));\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Flips the board.\n */\nexport function flipBoard<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  shouldFlip: boolean,\n): void {\n  const { state, methods } = instance;\n\n  if (state.isBoardFlipped === shouldFlip) {\n    return;\n  }\n\n  state.isBoardFlipped = shouldFlip;\n\n  methods.flipBoard(state, shouldFlip);\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Toggle board disabled boolean\n */\nexport function setBoardEnabled<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  enabled: boolean,\n): void {\n  const { state } = instance;\n\n  state.isBoardEnabled = enabled;\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Remove the analysis overlay.\n */\nexport function removeAnalysisOverlay<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n): void {\n  const { state, methods } = instance;\n\n  methods.removeAnalysisOverlay(state);\n}\n","import { Constants } from 'chessboard/renderers/webgl/base/constants';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Resizes the board.\n */\nexport function resize<T extends WebGLRenderer.State>(instance: WebGLRenderer.Instance<T>): void {\n  const { state, methods } = instance;\n  const { width, height } = state.containerEl.getBoundingClientRect();\n\n  state.viewSize.width = width || Constants.Board.DefaultWidth;\n  state.viewSize.height = height || Constants.Board.DefaultHeight;\n\n  methods.updateViewSize(state, state.viewSize);\n}\n","import type { Board } from 'chessboard/model/board/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Set board coordinates.\n */\nexport function setBoardCoordinates<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  {\n    position,\n    flipped,\n  }: {\n    position: Board.CoordinatesPositions;\n    flipped: boolean;\n  },\n): void {\n  const { state, methods } = instance;\n\n  methods.updateBoardCoordinates(state, { flipped, position });\n}\n","const rgbaRegex = /^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*((\\d|\\.)+))?\\)$/;\n\n/**\n * Get a hex color from rgba or rgb.\n */\nexport function rgbToHex(rgb) {\n  if (rgb.search('rgb') === -1) {\n    return rgb;\n  }\n\n  const matches = rgb.match(rgbaRegex);\n\n  return `#${hexValue(matches[1])}${hexValue(matches[2])}${hexValue(matches[3])}`;\n}\n\n/**\n * Get opacity from rgba.\n */\nexport function rgbaToOpacity(rgba) {\n  if (rgba.search('rgba') === -1) {\n    return 1;\n  }\n\n  return parseFloat(rgba.match(rgbaRegex)[4]);\n}\n\n/**\n * Get hex notation.\n */\nfunction hexValue(rgb) {\n  return `0${parseInt(rgb, 10).toString(16)}`.slice(-2);\n}\n","import { getFileRankFromSan } from 'chessboard/model/board/get-file-rank-from-san';\nimport { getArrowColor } from 'chessboard/model/arrows/get-arrow-color';\nimport type { KeyedArrow } from 'chessboard/plugins/arrows/config/types';\nimport { rgbToHex, rgbaToOpacity } from 'utils/colors/convert-color';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Add arrows on the board.\n */\nexport function addArrows<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  arrows: KeyedArrow[],\n): void {\n  const { state, methods } = instance;\n  const { options } = state;\n\n  arrows.forEach((arrow) => {\n    const { data, key } = arrow;\n    const { color, from, opacity, to } = data;\n\n    if (state.arrows[key]) {\n      methods.removeArrow(state, state.arrows[key]);\n\n      delete state.arrows[key];\n    }\n\n    const fromFileRank = getFileRankFromSan(from);\n    const toFileRank = getFileRankFromSan(to);\n\n    const fromFileDiff = Math.abs(fromFileRank.file - toFileRank.file);\n    const fromRankDiff = Math.abs(fromFileRank.rank - toFileRank.rank);\n\n    const isKnight =\n      (fromFileDiff === 1 && fromRankDiff === 2) || (fromFileDiff === 2 && fromRankDiff === 1);\n\n    const arrowColor = getArrowColor(color, options.arrowColors);\n\n    const arrowInfo = {\n      color: rgbToHex(arrowColor),\n      from: fromFileRank,\n      isKnight,\n      to: toFileRank,\n      opacity: opacity || rgbaToOpacity(arrowColor),\n    };\n\n    const arrowState = {\n      info: arrowInfo,\n      obj: methods.createArrowObj(state, arrowInfo),\n    };\n\n    methods.addArrow(state, arrowState);\n\n    state.arrows[key] = arrowState;\n  });\n}\n","import type { KeyedArrow } from 'chessboard/plugins/arrows/config/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Remove arrows from the board.\n */\nexport function removeArrows<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  arrows: KeyedArrow[],\n): void {\n  const { state, methods } = instance;\n\n  arrows.forEach((arrow) => {\n    const { key } = arrow;\n\n    methods.removeArrow(state, state.arrows[key]);\n\n    delete state.arrows[key];\n  });\n}\n","import { Game } from 'chessboard/model/game/types';\nimport type { KeyedHighlight } from 'chessboard/plugins/highlights/config/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { squareToPiecePosition } from 'chessboard/renderers/webgl/base/utils';\n\n/**\n * Add highlights to the board.\n */\nexport function addHighlights<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  highlightsToAdd: KeyedHighlight[],\n): void {\n  const { state, methods, animationMethods } = instance;\n  const { highlights } = state;\n\n  highlightsToAdd.forEach((highlightToAdd) => {\n    const { color, opacity, square, turn, type } = highlightToAdd.data;\n\n    if (highlights[square]) {\n      methods.removeHighlight(state, highlights[square]);\n\n      delete highlights[square];\n    }\n\n    const highlightInfo = {\n      color: color || Game.Highlight.Defaults.Color,\n      opacity,\n      position: squareToPiecePosition(instance, square),\n      square,\n      turn,\n      type,\n    };\n\n    const highlight = {\n      info: highlightInfo,\n      obj:\n        animationMethods.createHighlightObj?.(state, highlightInfo) ||\n        methods.createHighlightObj(state, highlightInfo),\n    };\n\n    methods.addHighlight(state, highlight);\n\n    animationMethods.showHighlight?.(state, highlight);\n\n    highlights[square] = highlight;\n  });\n}\n","import type { Board } from 'chessboard/model/board/types';\nimport { Game } from 'chessboard/model/game/types';\nimport type { KeyedBlinkingHighlight } from 'chessboard/plugins/highlights/config/types';\nimport { squareToPiecePosition } from 'chessboard/renderers/webgl/base/utils';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Blink highlights.\n */\nexport function blinkHighlights<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  highlights: KeyedBlinkingHighlight[],\n): void {\n  highlights.forEach((highlight) => {\n    const {\n      data: { square },\n    } = highlight;\n\n    blinkHighlight(instance, { blinkInfo: highlight, square });\n  });\n}\n\n/**\n * Blink a square.\n */\nfunction blinkHighlight<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  {\n    blinkInfo,\n    square,\n  }: {\n    blinkInfo: KeyedBlinkingHighlight;\n    square: Board.SanSquare;\n  },\n) {\n  const { state, methods, animationMethods } = instance;\n  const { blinkingHighlights } = state;\n  const { color, opacity, interval, times } = blinkInfo.data;\n\n  if (blinkingHighlights[square]) {\n    methods.removeHighlight(state, blinkingHighlights[square]);\n\n    delete blinkingHighlights[square];\n  }\n\n  const highlightInfo = {\n    color: color || Game.Highlight.Defaults.Color,\n    opacity,\n    position: squareToPiecePosition(instance, square),\n    square: square as Board.SanSquare,\n  };\n\n  const highlight = {\n    info: highlightInfo,\n    obj: methods.createHighlightObj(state, highlightInfo),\n  };\n\n  methods.addHighlight(state, highlight);\n\n  animationMethods\n    .blinkHighlight(state, {\n      interval,\n      highlight,\n      times,\n    })\n    .onEnd(() => {\n      methods.removeHighlight(state, highlight);\n\n      delete blinkingHighlights[square];\n    });\n\n  blinkingHighlights[square] = highlight;\n\n  if (state.options.test) {\n    (<any>highlightInfo).testBlinkInfo = { interval, times };\n  }\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Hide the hover square.\n */\nexport function hideHoverSquare<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n): void {\n  const { state, methods, animationMethods } = instance;\n\n  if (animationMethods.hideHoverSquare) {\n    animationMethods.hideHoverSquare(state);\n  } else {\n    methods.hideHoverSquare(state);\n  }\n}\n","import type { KeyedHighlight } from 'chessboard/plugins/highlights/config/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Remove highlights from the board.\n */\nexport function removeHighlights<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  highlightsToRemove: KeyedHighlight[],\n): void {\n  const { state, methods, animationMethods } = instance;\n  const { highlights } = state;\n\n  highlightsToRemove.forEach((highlightToRemove) => {\n    const { square } = highlightToRemove.data;\n\n    const highlight = highlights[square];\n\n    if (animationMethods.hideHighlight) {\n      animationMethods.hideHighlight(state, highlight).onEnd(() => {\n        methods.removeHighlight(state, highlight);\n      });\n    } else {\n      methods.removeHighlight(state, highlight);\n    }\n\n    delete highlights[square];\n  });\n}\n","import type { Board } from 'chessboard/model/board/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { squareToPiecePosition } from 'chessboard/renderers/webgl/base/utils';\n\n/**\n * Show the hover square.\n */\nexport function showHoverSquare<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  square: Board.SanSquare,\n): void {\n  const { state, methods, animationMethods } = instance;\n  const position = squareToPiecePosition(instance, square);\n\n  if (animationMethods.showHoverSquare) {\n    animationMethods.showHoverSquare?.(state, position);\n  } else {\n    methods.showHoverSquare(state, position);\n  }\n}\n","import type { Board } from 'chessboard/model/board/types';\nimport { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { animateItem } from 'chessboard/renderers/webgl/base/animation';\n\n/**\n * Remove hints from the board.\n */\nexport function removeHints<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  squares: Board.SanSquare[],\n): void {\n  const { state, methods, animationMethods } = instance;\n  const { hints } = state;\n\n  squares.forEach((square) => {\n    const hint = hints[square];\n\n    if (animationMethods.hideHint) {\n      animateItem(state, {\n        item: hint,\n        type: WebGLRenderer.ItemAnimation.Type.Hide,\n        animation: animationMethods.hideHint(state, hint),\n        onEnd: () => {\n          methods.removeHint(state, hint);\n        },\n      });\n    } else {\n      methods.removeHint(state, hint);\n    }\n\n    delete hints[square];\n  });\n}\n","import type { Board } from 'chessboard/model/board/types';\nimport { Constants } from 'chessboard/renderers/webgl/base/constants';\nimport { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { squareToPiecePosition } from 'chessboard/renderers/webgl/base/utils';\nimport type { Core } from 'chessboard/core/config/types';\nimport { animateItem } from 'chessboard/renderers/webgl/base/animation';\n\n/**\n * Add hints on the board.\n */\nexport function addHints<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  {\n    context,\n    squares,\n    type,\n  }: {\n    context: Core.Context;\n    squares: Board.SanSquare[];\n    type: WebGLRenderer.Hint.Type;\n  },\n): void {\n  const { state, methods, animationMethods } = instance;\n  const { hints } = state;\n\n  squares.forEach((square) => {\n    const hintInfo = {\n      color: <string>Constants.MoveHint.Color,\n      opacity: <number>Constants.MoveHint.Opacity,\n      position: squareToPiecePosition(instance, square),\n      square,\n      turn: context.api.getTurn(),\n      type,\n    };\n\n    const hintObj =\n      hintInfo.type === WebGLRenderer.Hint.Type.Capture\n        ? animationMethods.createCaptureHintObj?.(state, hintInfo) ||\n          methods.createCaptureHintObj(state, hintInfo)\n        : animationMethods.createMoveHintObj?.(state, hintInfo) ||\n          methods.createMoveHintObj(state, hintInfo);\n\n    const hint = {\n      info: hintInfo,\n      obj: hintObj,\n      activeAnimation: undefined,\n    };\n\n    methods.addHint(state, hint);\n\n    if (animationMethods.showHint) {\n      animateItem(state, {\n        item: hint,\n        type: WebGLRenderer.ItemAnimation.Type.Show,\n        animation: animationMethods.showHint(state, hint),\n      });\n    }\n\n    hints[square] = hint;\n  });\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Close the promotion window.\n */\nexport function closePromotionWindow<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n): void {\n  const { state, methods, animationMethods } = instance;\n\n  if (state.promotionWindowAnimation) {\n    state.animator.end(state.promotionWindowAnimation);\n    state.promotionWindowAnimation = null;\n  }\n\n  if (animationMethods.hidePromotionWindow) {\n    state.promotionWindowAnimation = animationMethods.hidePromotionWindow(state);\n\n    state.promotionWindowAnimation.onEnd(() => {\n      methods.closePromotionWindow(state);\n\n      state.promotionWindowAnimation = null;\n    });\n  } else {\n    methods.closePromotionWindow(state);\n  }\n\n  state.isPromotionWindowVisible = false;\n}\n","import { Core } from 'chessboard/core/config/types';\nimport type { Game } from 'chessboard/model/game/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { createCoreEvent } from 'chessboard/core/model/create-core-event';\n\n/**\n * Open the promotion window.\n */\nexport function openPromotionWindow<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  {\n    promotionMove,\n    context,\n  }: {\n    promotionMove: Game.Move.Model;\n    context: Core.Context;\n  },\n): void {\n  const { state, methods, animationMethods } = instance;\n\n  if (state.promotionWindowAnimation) {\n    state.animator.end(state.promotionWindowAnimation);\n    state.promotionWindowAnimation = null;\n  }\n\n  methods.openPromotionWindow(state, promotionMove).then((pieceType) => {\n    if (!state.isPromotionWindowVisible) {\n      return;\n    }\n\n    if (pieceType) {\n      context.run(\n        createCoreEvent(Core.BoardEvents.PromotionPiecePointerdown, { piece: pieceType }),\n      );\n    } else {\n      context.run(createCoreEvent(Core.BoardEvents.PromotionAreaClosePointerdown));\n    }\n  });\n\n  if (animationMethods.showPromotionWindow) {\n    state.promotionWindowAnimation = animationMethods.showPromotionWindow(state);\n    state.promotionWindowAnimation.onEnd(() => (state.promotionWindowAnimation = null));\n  }\n\n  state.isPromotionWindowVisible = true;\n}\n","import type { KeyedCustomItem } from 'chessboard/plugins/custom-items/config/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { squareToPiecePosition } from 'chessboard/renderers/webgl/base/utils';\n\n/**\n * Add custom items on the board.\n */\nexport function addCustomItems<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  itemsToAdd: KeyedCustomItem[],\n): void {\n  const { state, methods } = instance;\n  const { customItems } = state;\n\n  itemsToAdd.forEach((itemToAdd) => {\n    const { color, frame, image, opacity, square, text, type, visualOrder } = itemToAdd.data;\n\n    const itemInfo = {\n      color,\n      image,\n      frame,\n      opacity,\n      position: squareToPiecePosition(instance, square),\n      square,\n      text,\n      type,\n      visualOrder,\n    };\n\n    const item = {\n      info: itemInfo,\n      obj: methods.createCustomItemObj(state, itemInfo),\n    };\n\n    methods.addCustomItem(state, item);\n\n    customItems[square] = item;\n  });\n}\n","import type { KeyedCustomItem } from 'chessboard/plugins/custom-items/config/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Remove custom items from the board.\n */\nexport function removeCustomItems<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  itemsToRemove: KeyedCustomItem[],\n): void {\n  const { state, methods, animationMethods } = instance;\n  const { customItems } = state;\n\n  itemsToRemove.forEach((itemToRemove) => {\n    const {\n      data: { square },\n    } = itemToRemove;\n    const item = customItems[square];\n\n    if (item) {\n      if (animationMethods.hideCustomItem && !item.info.frame?.imageAnimated) {\n        animationMethods.hideCustomItem(state, item).onEnd(() => {\n          methods.removeCustomItem(state, item);\n        });\n      } else {\n        methods.removeCustomItem(state, item);\n      }\n    }\n\n    delete customItems[square];\n  });\n}\n","import type { KeyedEffect } from 'chessboard/plugins/effects/config/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport { squareToPiecePosition } from 'chessboard/renderers/webgl/base/utils';\nimport type { Effects } from 'chessboard/model/effects/types';\nimport type { Core } from 'chessboard/core/config/types';\n\n/**\n * Add effects on the board.\n */\nexport function addEffects<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  effectsToAdd: KeyedEffect[],\n  translations: Effects.Translations,\n  context: Core.Context,\n): void {\n  const { state, methods } = instance;\n  const { effects } = state;\n\n  effectsToAdd.forEach((effectToAdd) => {\n    const { square, type, animated } = effectToAdd.data;\n\n    const effectInfo: WebGLRenderer.Effect.Info = {\n      position: squareToPiecePosition(instance, square),\n      square,\n      type,\n      effect: effectToAdd,\n    };\n\n    const createEffectObj = animated ? methods.createEffectObjAnimated : methods.createEffectObj;\n    const effectObject = createEffectObj(state, effectInfo, translations, context);\n\n    const effect = {\n      animated: Boolean(animated),\n      info: effectInfo,\n      obj: effectObject,\n    };\n\n    effectObject.forEach((obj) => {\n      methods.addEffect(state, { ...effect, obj });\n    });\n\n    effects[square] = effect;\n  });\n}\n","import type { KeyedEffect } from 'chessboard/plugins/effects/config/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Remove effects from the board.\n */\nexport function removeEffects<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  effectsToAdd: KeyedEffect[],\n): void {\n  const { state, methods } = instance;\n  const { effects } = state;\n\n  effectsToAdd.forEach((effectToAdd) => {\n    const { square } = effectToAdd.data;\n\n    effects[square]?.obj.forEach((obj) => methods.removeEffect(state, { ...effects[square], obj }));\n\n    delete effects[square];\n  });\n}\n","import type JCE from '@chesscom/js-chess-engine';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Add effects on the board.\n */\nexport function fadeOutEffect<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  square: JCE.SanSquare,\n): Promise<void> {\n  const { state, methods } = instance;\n  return methods.fadeOutEffect(state, square);\n}\n","import { ThemeTakeover } from 'chessboard/plugins/theme-takeover/config/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Starts theme takeover\n */\nexport function startTakeover<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n  takeoverInfo: ThemeTakeover.StartParams,\n): void {\n  const { state, methods } = instance;\n\n  if (takeoverInfo.swipePercent === ThemeTakeover.SwipePercent.Full) {\n    methods.removeTakeover(state);\n  } else if (takeoverInfo.swipePercent === ThemeTakeover.SwipePercent.Half) {\n    methods.removeTakeoverByType(state, takeoverInfo.swipeDirection);\n    methods.removeTakeoverByType(state, ThemeTakeover.SwipePercent.Full);\n  }\n\n  const takeoverObject = methods.createTakeover(state, takeoverInfo);\n  methods.addTakeover(state, takeoverObject);\n\n  state.takeover.push({\n    info: takeoverInfo,\n    obj: takeoverObject,\n  });\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Starts theme takeover\n */\nexport function endTakeover<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n): void {\n  instance.methods.endTakeover(instance.state);\n}\n","import type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Clears theme takeover\n */\nexport function clearTakeover<T extends WebGLRenderer.State>(\n  instance: WebGLRenderer.Instance<T>,\n): void {\n  const { state, methods } = instance;\n\n  methods.removeTakeover(state);\n}\n","import type { Core } from 'chessboard/core/config/types';\nimport type { Board } from 'chessboard/model/board/types';\nimport type { Game } from 'chessboard/model/game/types';\nimport type {\n  DragPiece,\n  Renderer,\n  AnimationTypes,\n  AddEffectsData,\n} from 'chessboard/renderers/config/types';\nimport { WebGLRenderer } from 'chessboard/renderers/webgl/base';\nimport {\n  getCoordsFromSquare,\n  getPointerPosition,\n  getViewAspectRatio,\n  getWebGLCanvas,\n  handleWebGLContextLost,\n} from 'chessboard/renderers/webgl/base/main';\nimport { init } from 'chessboard/renderers/webgl/base/main/init';\nimport { destroy } from 'chessboard/renderers/webgl/base/main/destroy';\nimport { isAnimating } from 'chessboard/renderers/webgl/base/animation/is-animating';\nimport { getPieces } from 'chessboard/renderers/webgl/base/pieces';\nimport { dragPiece } from 'chessboard/renderers/webgl/base/pieces/drag-piece';\nimport { changePiecesStyle } from 'chessboard/renderers/webgl/base/pieces/change-pieces-style';\nimport { undoMove } from 'chessboard/renderers/webgl/base/pieces/undo-move';\nimport { removePiece } from 'chessboard/renderers/webgl/base/pieces/remove-piece';\nimport { dropPiece } from 'chessboard/renderers/webgl/base/pieces/drop-piece';\nimport { illegalMove } from 'chessboard/renderers/webgl/base/pieces/illegal-move';\nimport { loadPieces } from 'chessboard/renderers/webgl/base/pieces/load-pieces';\nimport { makeMove } from 'chessboard/renderers/webgl/base/pieces/make-move';\nimport {\n  addAnalysisOverlay,\n  changeBoardStyle,\n  fadeSetup,\n  flipBoard,\n  setBoardEnabled,\n  removeAnalysisOverlay,\n  resize,\n  setBoardCoordinates,\n} from 'chessboard/renderers/webgl/base/board';\nimport { addArrows, removeArrows } from 'chessboard/renderers/webgl/base/arrows';\nimport {\n  addHighlights,\n  blinkHighlights,\n  hideHoverSquare,\n  removeHighlights,\n  showHoverSquare,\n} from 'chessboard/renderers/webgl/base/highlights';\nimport { removeHints } from 'chessboard/renderers/webgl/base/hints/remove-hints';\nimport { addHints } from 'chessboard/renderers/webgl/base/hints/add-hints';\nimport {\n  closePromotionWindow,\n  openPromotionWindow,\n} from 'chessboard/renderers/webgl/base/promotion-window';\nimport { addCustomItems, removeCustomItems } from 'chessboard/renderers/webgl/base/custom-items';\nimport { addEffects, fadeOutEffect, removeEffects } from 'chessboard/renderers/webgl/base/effects';\nimport {\n  clearTakeover,\n  startTakeover,\n  endTakeover,\n} from 'chessboard/renderers/webgl/base/theme-takeover';\nimport type { KeyedCustomItem } from 'chessboard/plugins/custom-items/config/types';\nimport type { KeyedArrow } from 'chessboard/plugins/arrows/config/types';\nimport type { KeyedEffect } from 'chessboard/plugins/effects/config/types';\nimport type {\n  KeyedBlinkingHighlight,\n  KeyedHighlight,\n} from 'chessboard/plugins/highlights/config/types';\nimport type { ThemeTakeover } from 'chessboard/plugins/theme-takeover/config/types';\n\n/**\n * Create a WebGL board renderer instance.\n */\nexport function createWebGLRendererInstance<T extends WebGLRenderer.State>(\n  params: WebGLRenderer.Params<T>,\n): Renderer.Model {\n  const instance = init(params);\n\n  return {\n    addAnalysisOverlay: () => addAnalysisOverlay(instance),\n    addArrows: (arrows: KeyedArrow[]) => addArrows(instance, arrows),\n    addCaptureHints: (squares: Board.SanSquare[], context) => {\n      addHints(instance, { context, squares, type: WebGLRenderer.Hint.Type.Capture });\n    },\n    addCustomItems: (items: KeyedCustomItem[]) => addCustomItems(instance, items),\n    addEffects: ({ effects, translations }: AddEffectsData, context: Core.Context) => {\n      addEffects(instance, effects, translations, context);\n    },\n    addMoveHints: (squares: Board.SanSquare[], context) => {\n      addHints(instance, { context, squares, type: WebGLRenderer.Hint.Type.Move });\n    },\n    addHighlights: (highlights: KeyedHighlight[]) => {\n      addHighlights(instance, highlights);\n    },\n    animationComplete: (animationType: AnimationTypes) => animationType && Promise.resolve(),\n    areAssetsLoaded: () => instance.state.assetsLoaded,\n    blinkHighlights: (blinkingHighlights: KeyedBlinkingHighlight[]) => {\n      blinkHighlights(instance, blinkingHighlights);\n    },\n    closePromotionWindow: () => closePromotionWindow(instance),\n    createRenderer: createWebGLRendererInstance,\n    destroy: () => destroy(instance),\n    dragPiece: (piece: DragPiece) => dragPiece(instance, piece),\n    dropPiece: (square: Board.SanSquare) => dropPiece(instance, square),\n    ...params.emitter,\n    extendRenderer: () => {},\n    fadeSetup: (context) => fadeSetup(instance, context.options.fadeSetup),\n    flipBoard: (shouldFlip: boolean) => flipBoard(instance, shouldFlip),\n    getCoordsFromSquare: (square: Board.SanSquare) => getCoordsFromSquare(instance, square),\n    getPieces: () => getPieces(instance),\n    getPieceStyles: instance.methods.getPieceStyles,\n    getPointerPosition: ({ event }: { event: MouseEvent }) => getPointerPosition(instance, event),\n    getRendererOptions: () => params,\n    getBoardContainerAspectRatio: () => getViewAspectRatio(instance),\n    getWebGLCanvas: () => getWebGLCanvas(instance),\n    handleWebGLContextLost: () => handleWebGLContextLost(instance),\n    hideHoverSquare: () => hideHoverSquare(instance),\n    illegalMove: (kingInCheck: false | Board.SanSquare) => illegalMove(instance, kingInCheck),\n    isAnimating: (animationType?: AnimationTypes) => isAnimating(instance, animationType),\n    loadPieces: ({ pieces, reloadAll }: { pieces: Game.Piece.Collection; reloadAll?: boolean }) => {\n      loadPieces(instance, { piecesInfo: pieces, reloadAll });\n    },\n    makeMove: (move: Game.Move.Extended, context: Core.Context) => {\n      makeMove(instance, { attackedKingSquare: context.api.isCheck() || undefined, move });\n    },\n    name: params.name,\n    openPromotionWindow: (promotionMove: Game.Move.Model, context: Core.Context) => {\n      openPromotionWindow(instance, { context, promotionMove });\n    },\n    removeAnalysisOverlay: () => removeAnalysisOverlay(instance),\n    removeArrows: (arrows: KeyedArrow[]) => removeArrows(instance, arrows),\n    removeCustomItems: (customItems: KeyedCustomItem[]) => {\n      removeCustomItems(instance, customItems);\n    },\n    removeEffects: (effects: KeyedEffect[]) => removeEffects(instance, effects),\n    fadeOutEffect: (square) => fadeOutEffect(instance, square),\n    removeHints: (squares: Board.SanSquare[]) => removeHints(instance, squares),\n    removePiece: (square: Board.SanSquare) => removePiece(instance, { square }),\n    removeHighlights: (highlights: KeyedHighlight[]) => removeHighlights(instance, highlights),\n    resize: () => resize(instance),\n    setBoardEnabled: (enabled: boolean) => setBoardEnabled(instance, enabled),\n    setCoordinates: (coordinates) => setBoardCoordinates(instance, coordinates),\n    showHoverSquare: (square: Board.SanSquare) => showHoverSquare(instance, square),\n    undoMove: (move: Game.Move.ExtendedNode, context: Core.Context) => {\n      undoMove(instance, { attackedKingSquare: context.api.isCheck() || undefined, move });\n    },\n    updateBoardImage: (context: Core.Context) => {\n      changeBoardStyle(instance, context);\n    },\n    updatePieceBaseImage: (context: Core.Context, fallback = false) => {\n      changePiecesStyle(instance, context, fallback);\n    },\n\n    startTakeover: (takeoverInfo: ThemeTakeover.StartParams) => {\n      startTakeover(instance, takeoverInfo);\n    },\n    endTakeover: () => endTakeover(instance),\n    clearTakeover: () => clearTakeover(instance),\n  };\n}\n","import type { Board } from 'chessboard/model/board/types';\nimport type { WebGLRenderer } from 'chessboard/renderers/webgl/base';\n\n/**\n * Find a piece based on a SAN square.\n */\nexport function findPieceFromSquare<T extends WebGLRenderer.State>(\n  state: T,\n  square: Board.SanSquare,\n): WebGLRenderer.Piece.Model<any> | null {\n  const foundPiece = Object.values(state.pieces).find((piece) => {\n    if (piece.info.square === square) {\n      return true;\n    }\n\n    return false;\n  });\n\n  return foundPiece || null;\n}\n","/**\n * Restrict a number between a range.\n */\nexport function limitNumberWithinRange(value: number, range: { min: number; max: number }) {\n  return Math.min(Math.max(value, range.min), range.max);\n}\n","import type { Board } from 'chessboard/model/board/types';\n\n/**\n * Get the length from one point to another\n */\nexport function calculateArrowLength({\n  from,\n  to,\n}: {\n  from: Board.Coords;\n  to: Board.Coords;\n}): number {\n  return Math.sqrt((from.x - to.x) ** 2 + (from.y - to.y) ** 2);\n}\n","export namespace Constants {\n  export const enum Board {\n    DefaultWidth = 300,\n    DefaultHeight = 300,\n\n    DefaultDarkSquareColor = '#000000',\n    DefaultLightSquareColor = '#ffffff',\n  }\n\n  export const enum AnalysisOverlay {\n    Opacity = 0.2,\n  }\n\n  export const enum CustomItem {\n    Opacity = 0.8,\n\n    // The frame crop ratio based on its size.\n    FrameCropRatio = 0.9,\n  }\n\n  export const enum Effect {\n    // The size ratio based on square size.\n    SizeRatio = 0.4,\n\n    // The offset ratio from squares' intersection, based on square size.\n    OffsetRatio = 0.44,\n  }\n\n  export const enum MoveHint {\n    Color = '#000000',\n    Opacity = 0.1,\n\n    // The circle radius size ratio based on square size.\n    RadiusRatio = 0.16,\n  }\n\n  export const enum CaptureHint {\n    Color = MoveHint.Color,\n    Opacity = MoveHint.Opacity,\n\n    // The circle's outer radius size ratio based on square size.\n    OuterRadiusRatio = 0.5,\n\n    // The circle's inner radius size ratio based on square size.\n    InnerRadiusRatio = 0.41,\n  }\n\n  export const enum SVG {\n    // The size of the image used to convert the SVG to a texture.\n    ImageSize = 256,\n  }\n}\n","/**\n * Arrow styles\n */\nexport const arrowStyles = {\n  HEAD_HEIGHT: 4.5,\n  HEAD_WIDTH: 6.5,\n  TAIL_PADDING: 4.5,\n  WIDTH: 2.75,\n};\n\n/**\n * Valid length for a knight arrow\n */\nexport const KNIGHT_ARROW_LENGTH = 27.95084971874737;\n\n/**\n * Flipped knight arrows\n */\nexport const flippedKnightArrowSlopes = [0.5, -2];\n\n/**\n * Valid arrow slopes\n */\nexport const validArrowSlopes = [Infinity, 2, 1, 0.5, 0, -0.5, -1, -2, -Infinity];\n\n/**\n * Valid knight arrow slopes\n */\nexport const validKnightArrowSlopes = [2, 0.5, -0.5, -2];\n","import { PointerEvents } from 'chessboard/model/dom/get-pointer-events';\n\nexport const defaultX = -1;\nexport const defaultY = -1;\n\nlet lastX = defaultX;\nlet lastY = defaultY;\n\n/**\n * Get pure XY coordinates from event.\n * Useful because of many different devices/browsers/events.\n */\nexport function getXYFromEvent({ clientX, clientY, pointer, type, touches }: any): {\n  x: number;\n  y: number;\n} {\n  /**\n   * Since `touchend` event doesn't contain any coordinates, we need to save and get them\n   * from the previous events: `touchstart` and `touchmove`\n   */\n  const shouldTrack = type === PointerEvents.Touchmove || type === PointerEvents.Touchstart;\n  if (shouldTrack && touches.length > 0) {\n    lastX = touches[0].clientX;\n    lastY = touches[0].clientY;\n  }\n\n  if (type === PointerEvents.Touchend) {\n    return {\n      x: lastX,\n      y: lastY,\n    };\n  }\n\n  if (pointer) {\n    return {\n      x: pointer.x,\n      y: pointer.y,\n    };\n  }\n\n  if (touches && touches.length > 0) {\n    return {\n      x: touches[0].clientX,\n      y: touches[0].clientY,\n    };\n  }\n\n  return {\n    x: clientX ?? defaultX,\n    y: clientY ?? defaultY,\n  };\n}\n"],"names":["CustomItems","CustomItems2","Plugin2","Name","Plugin","Classes2","Classes","CustomItemType","VisualOrder","VisualOrder2","Targets2","Targets","Positions2","Positions","Types","Types2","findPieceFromFileRank","state","fileRank","square","getSanFromFileRank","findPieceFromSquare","easeInQuartic","t","easeInOutQuartic","calculateArrowSlope","from","to","slope","y","x","roundedSlope","Number","toFixed","paths","enPassant","soundsDefault","soundsTheme","webglAssetPaths","webglDataUrl","webglDataUrlDev","getWebglAssetUrl","assetPath","urlParams","URLSearchParams","window","location","search","get","baseUrl","href","replace","getFileRankFromSan","san","file","toLowerCase","charCodeAt","rank","charAt","easeInQuadratic","easeOutQuadratic","easeInOutQuadratic","setSVGAttributes","svgMarkup","attrs","itemEl","document","createElement","innerHTML","svgEl","querySelector","color","style","fill","opacity","String","text","textEl","value","fontSize","fontFamily","outerHTML","getKnightArrowRotation","ThemeTakeover","ThemeTakeover2","SwipeDirection2","SwipeDirection","SwipePercent2","SwipePercent","Events2","Events","swipeInAnimationName","swipeOutAnimationName","SwipeMap","percent","duration","easing","in","out","easeOutCubic","easeLinear","Image","Star","TextBox","fromCharCode","toString","setTestData","el","keyVals","Object","entries","forEach","key","val","capitalizedKey","toUpperCase","slice","dataset","TestKeys","TestKeys2","TestElements","TestElements2","getBoardXYFromEvent","event","boardEl","boardRect","getBoundingClientRect","getXYFromEvent","left","top","WebGLRenderer","WebGLRenderer2","PixelRatio","devicePixelRatio","Piece2","Animation2","Type2","Type","Animation","Piece","Hint2","Hint","ItemAnimation2","ItemAnimation","calculateArrowRotation","length","calculateArrowLength","originalTo","vector1","vector2","cosine","clampedCosine","Math","max","min","radians","acos","degrees","floor","PI","getArrowColor","colorOptions","Game","Node","Marking","JCEColorsMap","default","getUndoMoveDetails","move","movedPieces","animate","nodeTargetSquare","rookMove","push","restoredPiece","captured","capturedStr","getOppositeColor","promoted","capturedPromotedPawn","EPCapturedSquare","type","promotedSquare","promotion","getCoordsFromSquare","instance","methods","boardPosition","fileRankToPosition","getViewPosition","positionToSquare","position","positionToFileRank","positionToSquarePercentage","squareSize","positionX","positionY","squarePosition","positionInsideSquare","getPointerPosition","containerEl","coords","viewPosition","normalizePointer","getBoardPosition","positionInsideBoard","positionToNearestSquare","coordsInsideBoard","coordsInsideSquare","squareInsideBoard","getViewAspectRatio","getWebGLCanvas","viewEl","handleWebGLContextLost","newViewEl","cloneNode","replaceWith","onWebGLContextLost","getPieces","keys","pieces","reduce","acc","info","isPositionInsideBoard","onMouseDoubleClick","pointer","insideBoard","_a","call","previousViewPosition","previousBoardPosition","onMouseWheel","eventHandled","deltaY","preventDefault","stopImmediatePropagation","endPieceAnimation","piece","animator","pieceAnimations","animData","id","animation","ended","end","isSecondaryButton","isTouchEvent","which","onPointerDown","animatedOverPiece","isRightDown","isRightButton","isBoardEnabled","down","secondaryDown","rightDown","downInsideBoard","animateItem","item","onEnd","activeAnimation","animatePiece","endedAnimation","endItemAnimation","isPieceAnimating","animations","values","i","findPieceFromPosition","findHintFromSquare","hints","find","hint","findHintFromFileRank","findHintFromPosition","onPointerMove","animationMethods","pieceOver","doPieceOverAnimation","hintOver","doHintOverAnimation","selectedPiece","overPiece","Over","pieceOut","Out","previousSquare","currentSquare","animatedOverHint","overHint","hintOut","onPointerUp","addEventListeners","eventListeners","pointerDown","pointerMove","pointerUp","addEventListener","Pointerdown","Pointermove","Pointerup","doubleClick","wheel","addToWindow","params","assign","JCE","updateAnimatedProperties","animatedProps","animatedPropsKeyframes","frameInfo","isTargetHTMLElement","keyframes","target","elapsedPercentage","fromValue","toValue","fromKeyframe","toKeyframe","keyframeElapsedInterval","property","createAnimation","data","repeat","getAnimatedProps","getAnimatedPropsKeyframes","endCallbacks","endTime","forcedEnd","deltaTime","elapsedInterval","HTMLElement","callback","repeatCount","started","startTime","keptAlive","Error","animatedPropsList","sort","a","b","parseInt","createAnimator","manualUpdate","playingAnimations","frameRequestId","frameTime","endAll","play","playingAnimationsCount","update","animationLoop","time","onAnimationStart","round","onAnimationUpdate","onAnimationEnd","requestAnimationFrame","indexOf","keepAlive","repeatDelay","Infinity","removeAnimation","delay","onStart","onUpdate","startAnimationLoop","animationIndex","splice","stopAnimationLoop","performance","now","cancelAnimationFrame","createBaseState","options","boardThemes","pieceThemes","attackedKing","arrows","assetsLoaded","blinkingHighlights","boardId","boardStyle","customItems","destroyed","effects","fadeSetupAnimation","flipCoordinates","highlights","hoverSquare","isBoardFlipped","flipped","enabled","isCheckmate","isPromotionWindowVisible","pieceStyle","Event","promotionWindowAnimation","viewSize","width","Constants","Board","DefaultWidth","height","DefaultHeight","takeover","updatePiecesVisuals","updatePieceVisuals","onPiecesVisualsChanged","loadAssets","Promise","all","then","appendChild","updateLoop","render","init","className","name","testElement","createState","lastPieceId","createHoverSquareObj","emitter","emit","Core","InstanceEvents","WebGLAssetsInitialized","classList","add","onAnimatedFrameReceived","test","setupTestData","Element","SiblingBoard","webglSiblingBoardState","webglBoardState","removeEventListeners","removeEventListener","destroy","parentNode","removeChild","remove","isAnimating","animationType","AnimationTypes","Move","Capture","Drop","Restore","includes","squareToPiecePosition","dragPiece","draggedPieceInfo","toSquare","Drag","setPiecePosition","onPieceDrag","changePiecesStyle","context","fallback","themeAssets","updatePiecesStyle","swapPiece","endAllPiecesAnimation","movePieces","moves","castling","isCastle","capturing","isCapture","piece1","piece2","King","Rook","moveTo","fromPosition","toPosition","userGeneratedDrop","dropPiece","movePiece","_a2","onPieceMoved","attackKing","KingAttack","oldPiece","removePiece","fromDrop","capturePiece","generatePieceId","addPiece","pieceInfo","obj","createPieceObj","piecePosition","undoMove","attackedKingSquare","drop","addedPiece","restorePiece","promotedPiece","Pawn","onPieceDrop","illegalMove","kingInCheck","kingPiece","loadPieces","piecesInfo","reloadAll","newPieceInfo","isDefined","filter","onPiecesLoaded","makeMove","Boolean","addAnalysisOverlay","changeBoardStyle","coordinates","updateBoardStyle","updateBoardCoordinates","colorUpdate","fadeSetup","fadeDuration","fadeInAllPieces","flipBoard","shouldFlip","setBoardEnabled","removeAnalysisOverlay","resize","updateViewSize","setBoardCoordinates","rgbaRegex","rgbToHex","rgb","matches","match","hexValue","rgbaToOpacity","rgba","parseFloat","addArrows","arrow","removeArrow","fromFileRank","toFileRank","fromFileDiff","abs","fromRankDiff","isKnight","arrowColor","arrowColors","arrowInfo","arrowState","createArrowObj","addArrow","removeArrows","addHighlights","highlightsToAdd","highlightToAdd","turn","removeHighlight","highlightInfo","Highlight","Defaults","Color","highlight","createHighlightObj","addHighlight","_b","showHighlight","blinkHighlights","blinkHighlight","blinkInfo","interval","times","testBlinkInfo","hideHoverSquare","removeHighlights","highlightsToRemove","highlightToRemove","hideHighlight","showHoverSquare","removeHints","squares","hideHint","Hide","removeHint","addHints","hintInfo","MoveHint","Opacity","api","getTurn","hintObj","createCaptureHintObj","createMoveHintObj","addHint","showHint","Show","closePromotionWindow","hidePromotionWindow","openPromotionWindow","promotionMove","pieceType","run","createCoreEvent","BoardEvents","PromotionPiecePointerdown","PromotionAreaClosePointerdown","showPromotionWindow","addCustomItems","itemsToAdd","itemToAdd","frame","image","visualOrder","itemInfo","createCustomItemObj","addCustomItem","removeCustomItems","itemsToRemove","itemToRemove","hideCustomItem","imageAnimated","removeCustomItem","addEffects","effectsToAdd","translations","effectToAdd","animated","effectInfo","effect","createEffectObj","createEffectObjAnimated","effectObject","addEffect","removeEffects","removeEffect","fadeOutEffect","startTakeover","takeoverInfo","swipePercent","Full","removeTakeover","Half","removeTakeoverByType","swipeDirection","takeoverObject","createTakeover","addTakeover","endTakeover","clearTakeover","createWebGLRendererInstance","addCaptureHints","items","addMoveHints","animationComplete","resolve","areAssetsLoaded","createRenderer","extendRenderer","getPieceStyles","getRendererOptions","getBoardContainerAspectRatio","isCheck","setCoordinates","updateBoardImage","updatePieceBaseImage","foundPiece","limitNumberWithinRange","range","sqrt","Constants2","Board2","AnalysisOverlay2","AnalysisOverlay","CustomItem2","CustomItem","Effect2","Effect","MoveHint2","CaptureHint2","CaptureHint","SVG2","SVG","arrowStyles","HEAD_HEIGHT","HEAD_WIDTH","TAIL_PADDING","WIDTH","KNIGHT_ARROW_LENGTH","flippedKnightArrowSlopes","validKnightArrowSlopes","defaultX","defaultY","lastX","lastY","clientX","clientY","touches","shouldTrack","PointerEvents","Touchmove","Touchstart","Touchend"],"sourceRoot":""}